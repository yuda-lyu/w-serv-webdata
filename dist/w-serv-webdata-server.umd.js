/*!
 * w-serv-webdata-server v1.0.30
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("path"),require("fs")):"function"==typeof define&&define.amd?define(["path","fs"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-serv-webdata-server"]=e(t.path,t.fs)}(this,(function(t,e){"use strict";var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var o=Array.isArray,i="object"==typeof r&&r&&r.Object===Object&&r,u=i,a="object"==typeof self&&self&&self.Object===Object&&self,c=u||a||Function("return this")(),s=c.Symbol,f=s,l=Object.prototype,v=l.hasOwnProperty,h=l.toString,p=f?f.toStringTag:void 0;var y=function(t){var e=v.call(t,p),r=t[p];try{t[p]=void 0;var n=!0}catch(t){}var o=h.call(t);return n&&(e?t[p]=r:delete t[p]),o},b=Object.prototype.toString;var d=y,g=function(t){return b.call(t)},j=s?s.toStringTag:void 0;var _=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":j&&j in Object(t)?d(t):g(t)};var m=function(t){return null!=t&&"object"==typeof t},O=_,w=m;var S=function(t){return"symbol"==typeof t||w(t)&&"[object Symbol]"==O(t)},$=o,T=S,M=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,x=/^\w*$/;var A=function(t,e){if($(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!T(t))||(x.test(t)||!M.test(t)||null!=e&&t in Object(e))};var D=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},P=_,F=D;var I,N=function(t){if(!F(t))return!1;var e=P(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},k=c["__core-js_shared__"],C=(I=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||""))?"Symbol(src)_1."+I:"";var E=function(t){return!!C&&C in t},W=Function.prototype.toString;var z=function(t){if(null!=t){try{return W.call(t)}catch(t){}try{return t+""}catch(t){}}return""},U=N,R=E,L=D,Y=z,B=/^\[object .+?Constructor\]$/,H=Function.prototype,V=Object.prototype,J=H.toString,q=V.hasOwnProperty,G=RegExp("^"+J.call(q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Z=function(t){return!(!L(t)||R(t))&&(U(t)?G:B).test(Y(t))},Q=function(t,e){return null==t?void 0:t[e]};var K=function(t,e){var r=Q(t,e);return Z(r)?r:void 0},X=K(Object,"create"),tt=X;var et=function(){this.__data__=tt?tt(null):{},this.size=0};var rt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},nt=X,ot=Object.prototype.hasOwnProperty;var it=function(t){var e=this.__data__;if(nt){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return ot.call(e,t)?e[t]:void 0},ut=X,at=Object.prototype.hasOwnProperty;var ct=X;var st=et,ft=rt,lt=it,vt=function(t){var e=this.__data__;return ut?void 0!==e[t]:at.call(e,t)},ht=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=ct&&void 0===e?"__lodash_hash_undefined__":e,this};function pt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}pt.prototype.clear=st,pt.prototype.delete=ft,pt.prototype.get=lt,pt.prototype.has=vt,pt.prototype.set=ht;var yt=pt;var bt=function(){this.__data__=[],this.size=0};var dt=function(t,e){return t===e||t!=t&&e!=e},gt=dt;var jt=function(t,e){for(var r=t.length;r--;)if(gt(t[r][0],e))return r;return-1},_t=jt,mt=Array.prototype.splice;var Ot=jt;var wt=jt;var St=jt;var $t=bt,Tt=function(t){var e=this.__data__,r=_t(e,t);return!(r<0)&&(r==e.length-1?e.pop():mt.call(e,r,1),--this.size,!0)},Mt=function(t){var e=this.__data__,r=Ot(e,t);return r<0?void 0:e[r][1]},xt=function(t){return wt(this.__data__,t)>-1},At=function(t,e){var r=this.__data__,n=St(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function Dt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Dt.prototype.clear=$t,Dt.prototype.delete=Tt,Dt.prototype.get=Mt,Dt.prototype.has=xt,Dt.prototype.set=At;var Pt=Dt,Ft=K(c,"Map"),It=yt,Nt=Pt,kt=Ft;var Ct=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Et=function(t,e){var r=t.__data__;return Ct(e)?r["string"==typeof e?"string":"hash"]:r.map},Wt=Et;var zt=Et;var Ut=Et;var Rt=Et;var Lt=function(t,e){var r=Rt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},Yt=function(){this.size=0,this.__data__={hash:new It,map:new(kt||Nt),string:new It}},Bt=function(t){var e=Wt(this,t).delete(t);return this.size-=e?1:0,e},Ht=function(t){return zt(this,t).get(t)},Vt=function(t){return Ut(this,t).has(t)},Jt=Lt;function qt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}qt.prototype.clear=Yt,qt.prototype.delete=Bt,qt.prototype.get=Ht,qt.prototype.has=Vt,qt.prototype.set=Jt;var Gt=qt,Zt=Gt;function Qt(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var u=t.apply(this,n);return r.cache=i.set(o,u)||i,u};return r.cache=new(Qt.Cache||Zt),r}Qt.Cache=Zt;var Kt=Qt;var Xt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/\\(\\)?/g,ee=function(t){var e=Kt(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Xt,(function(t,r,n,o){e.push(n?o.replace(te,"$1"):r||t)})),e}));var re=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o},ne=o,oe=S,ie=s?s.prototype:void 0,ue=ie?ie.toString:void 0;var ae=function t(e){if("string"==typeof e)return e;if(ne(e))return re(e,t)+"";if(oe(e))return ue?ue.call(e):"";var r=e+"";return"0"==r&&1/e==-Infinity?"-0":r},ce=ae;var se=function(t){return null==t?"":ce(t)},fe=o,le=A,ve=ee,he=se;var pe=S;var ye=function(t,e){return fe(t)?t:le(t,e)?[t]:ve(he(t))},be=function(t){if("string"==typeof t||pe(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e};var de=function(t,e){for(var r=0,n=(e=ye(e,t)).length;null!=t&&r<n;)t=t[be(e[r++])];return r&&r==n?t:void 0},ge=de;var je=function(t,e,r){var n=null==t?void 0:ge(t,e);return void 0===n?r:n};function _e(t){return"[object Object]"===Object.prototype.toString.call(t)}var me=_,Oe=m;var we=function(t){return!0===t||!1===t||Oe(t)&&"[object Boolean]"==me(t)};function Se(t){return we(t)}var $e={};!function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function i(t,e,n,i,u){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new o(n,i||t,u),c=r?r+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,n,o=[];if(0===this._eventsCount)return o;for(n in t=this._events)e.call(t,n)&&o.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},a.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,u=new Array(i);o<i;o++)u[o]=n[o].fn;return u},a.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,o,i,u){var a=r?r+t:t;if(!this._events[a])return!1;var c,s,f=this._events[a],l=arguments.length;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),l){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,e),!0;case 3:return f.fn.call(f.context,e,n),!0;case 4:return f.fn.call(f.context,e,n,o),!0;case 5:return f.fn.call(f.context,e,n,o,i),!0;case 6:return f.fn.call(f.context,e,n,o,i,u),!0}for(s=1,c=new Array(l-1);s<l;s++)c[s-1]=arguments[s];f.fn.apply(f.context,c)}else{var v,h=f.length;for(s=0;s<h;s++)switch(f[s].once&&this.removeListener(t,f[s].fn,void 0,!0),l){case 1:f[s].fn.call(f[s].context);break;case 2:f[s].fn.call(f[s].context,e);break;case 3:f[s].fn.call(f[s].context,e,n);break;case 4:f[s].fn.call(f[s].context,e,n,o);break;default:if(!c)for(v=1,c=new Array(l-1);v<l;v++)c[v-1]=arguments[v];f[s].fn.apply(f[s].context,c)}}return!0},a.prototype.on=function(t,e,r){return i(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return i(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,n,o){var i=r?r+t:t;if(!this._events[i])return this;if(!e)return u(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||o&&!a.once||n&&a.context!==n||u(this,i);else{for(var c=0,s=[],f=a.length;c<f;c++)(a[c].fn!==e||o&&!a[c].once||n&&a[c].context!==n)&&s.push(a[c]);s.length?this._events[i]=1===s.length?s[0]:s:u(this,i)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&u(this,e)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a}({get exports(){return $e},set exports(t){$e=t}});var Te=$e;function Me(){return new Te}var xe={},Ae={get exports(){return xe},set exports(t){xe=t}};var De=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t};var Pe=function(t){return function(e,r,n){for(var o=-1,i=Object(e),u=n(e),a=u.length;a--;){var c=u[t?a:++o];if(!1===r(i[c],c,i))break}return e}}();var Fe=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n},Ie=_,Ne=m;var ke=function(t){return Ne(t)&&"[object Arguments]"==Ie(t)},Ce=m,Ee=Object.prototype,We=Ee.hasOwnProperty,ze=Ee.propertyIsEnumerable,Ue=ke(function(){return arguments}())?ke:function(t){return Ce(t)&&We.call(t,"callee")&&!ze.call(t,"callee")},Re=Ue,Le={};var Ye=function(){return!1};!function(t,e){var r=c,n=Ye,o=e&&!e.nodeType&&e,i=o&&t&&!t.nodeType&&t,u=i&&i.exports===o?r.Buffer:void 0,a=(u?u.isBuffer:void 0)||n;t.exports=a}({get exports(){return Le},set exports(t){Le=t}},Le);var Be=/^(?:0|[1-9]\d*)$/;var He=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&Be.test(t))&&t>-1&&t%1==0&&t<e};var Ve=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Je=_,qe=Ve,Ge=m,Ze={};Ze["[object Float32Array]"]=Ze["[object Float64Array]"]=Ze["[object Int8Array]"]=Ze["[object Int16Array]"]=Ze["[object Int32Array]"]=Ze["[object Uint8Array]"]=Ze["[object Uint8ClampedArray]"]=Ze["[object Uint16Array]"]=Ze["[object Uint32Array]"]=!0,Ze["[object Arguments]"]=Ze["[object Array]"]=Ze["[object ArrayBuffer]"]=Ze["[object Boolean]"]=Ze["[object DataView]"]=Ze["[object Date]"]=Ze["[object Error]"]=Ze["[object Function]"]=Ze["[object Map]"]=Ze["[object Number]"]=Ze["[object Object]"]=Ze["[object RegExp]"]=Ze["[object Set]"]=Ze["[object String]"]=Ze["[object WeakMap]"]=!1;var Qe=function(t){return Ge(t)&&qe(t.length)&&!!Ze[Je(t)]};var Ke=function(t){return function(e){return t(e)}},Xe={};!function(t,e){var r=i,n=e&&!e.nodeType&&e,o=n&&t&&!t.nodeType&&t,u=o&&o.exports===n&&r.process,a=function(){try{var t=o&&o.require&&o.require("util").types;return t||u&&u.binding&&u.binding("util")}catch(t){}}();t.exports=a}({get exports(){return Xe},set exports(t){Xe=t}},Xe);var tr=Qe,er=Ke,rr=Xe&&Xe.isTypedArray,nr=rr?er(rr):tr,or=Fe,ir=Re,ur=o,ar=Le,cr=He,sr=nr,fr=Object.prototype.hasOwnProperty;var lr=function(t,e){var r=ur(t),n=!r&&ir(t),o=!r&&!n&&ar(t),i=!r&&!n&&!o&&sr(t),u=r||n||o||i,a=u?or(t.length,String):[],c=a.length;for(var s in t)!e&&!fr.call(t,s)||u&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||cr(s,c))||a.push(s);return a},vr=Object.prototype;var hr=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||vr)};var pr=function(t,e){return function(r){return t(e(r))}},yr=pr(Object.keys,Object),br=hr,dr=yr,gr=Object.prototype.hasOwnProperty;var jr=function(t){if(!br(t))return dr(t);var e=[];for(var r in Object(t))gr.call(t,r)&&"constructor"!=r&&e.push(r);return e},_r=N,mr=Ve;var Or=function(t){return null!=t&&mr(t.length)&&!_r(t)},wr=lr,Sr=jr,$r=Or;var Tr=function(t){return $r(t)?wr(t):Sr(t)},Mr=Pe,xr=Tr;var Ar=Or;var Dr=function(t,e){return function(r,n){if(null==r)return r;if(!Ar(r))return t(r,n);for(var o=r.length,i=e?o:-1,u=Object(r);(e?i--:++i<o)&&!1!==n(u[i],i,u););return r}}((function(t,e){return t&&Mr(t,e,xr)}));var Pr=function(t){return t},Fr=Pr;var Ir=De,Nr=Dr,kr=function(t){return"function"==typeof t?t:Fr},Cr=o;var Er=function(t,e){return(Cr(t)?Ir:Nr)(t,kr(e))};!function(t){t.exports=Er}(Ae);var Wr=n(xe),zr=K(c,"DataView"),Ur=Ft,Rr=K(c,"Promise"),Lr=K(c,"Set"),Yr=K(c,"WeakMap"),Br=_,Hr=z,Vr="[object Map]",Jr="[object Promise]",qr="[object Set]",Gr="[object WeakMap]",Zr="[object DataView]",Qr=Hr(zr),Kr=Hr(Ur),Xr=Hr(Rr),tn=Hr(Lr),en=Hr(Yr),rn=Br;(zr&&rn(new zr(new ArrayBuffer(1)))!=Zr||Ur&&rn(new Ur)!=Vr||Rr&&rn(Rr.resolve())!=Jr||Lr&&rn(new Lr)!=qr||Yr&&rn(new Yr)!=Gr)&&(rn=function(t){var e=Br(t),r="[object Object]"==e?t.constructor:void 0,n=r?Hr(r):"";if(n)switch(n){case Qr:return Zr;case Kr:return Vr;case Xr:return Jr;case tn:return qr;case en:return Gr}return e});var nn=rn,on=_,un=o,an=m;var cn=function(t){return"string"==typeof t||!un(t)&&an(t)&&"[object String]"==on(t)};var sn=function(t){return function(e){return null==e?void 0:e[t]}}("length"),fn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var ln=function(t){return fn.test(t)},vn="\\ud800-\\udfff",hn="["+vn+"]",pn="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",yn="\\ud83c[\\udffb-\\udfff]",bn="[^"+vn+"]",dn="(?:\\ud83c[\\udde6-\\uddff]){2}",gn="[\\ud800-\\udbff][\\udc00-\\udfff]",jn="(?:"+pn+"|"+yn+")"+"?",_n="[\\ufe0e\\ufe0f]?",mn=_n+jn+("(?:\\u200d(?:"+[bn,dn,gn].join("|")+")"+_n+jn+")*"),On="(?:"+[bn+pn+"?",pn,dn,gn,hn].join("|")+")",wn=RegExp(yn+"(?="+yn+")|"+On+mn,"g");var Sn=sn,$n=ln,Tn=function(t){for(var e=wn.lastIndex=0;wn.test(t);)++e;return e};var Mn=jr,xn=nn,An=Or,Dn=cn,Pn=function(t){return $n(t)?Tn(t):Sn(t)};var Fn=function(t){if(null==t)return 0;if(An(t))return Dn(t)?Pn(t):t.length;var e=xn(t);return"[object Map]"==e||"[object Set]"==e?t.size:Mn(t).length},In=Pt;var Nn=Pt,kn=Ft,Cn=Gt;var En=Pt,Wn=function(){this.__data__=new In,this.size=0},zn=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Un=function(t){return this.__data__.get(t)},Rn=function(t){return this.__data__.has(t)},Ln=function(t,e){var r=this.__data__;if(r instanceof Nn){var n=r.__data__;if(!kn||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Cn(n)}return r.set(t,e),this.size=r.size,this};function Yn(t){var e=this.__data__=new En(t);this.size=e.size}Yn.prototype.clear=Wn,Yn.prototype.delete=zn,Yn.prototype.get=Un,Yn.prototype.has=Rn,Yn.prototype.set=Ln;var Bn=Yn,Hn=K,Vn=function(){try{var t=Hn(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Jn=Vn;var qn=function(t,e,r){"__proto__"==e&&Jn?Jn(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},Gn=qn,Zn=dt,Qn=Object.prototype.hasOwnProperty;var Kn=function(t,e,r){var n=t[e];Qn.call(t,e)&&Zn(n,r)&&(void 0!==r||e in t)||Gn(t,e,r)},Xn=Kn,to=qn;var eo=function(t,e,r,n){var o=!r;r||(r={});for(var i=-1,u=e.length;++i<u;){var a=e[i],c=n?n(r[a],t[a],a,r,t):void 0;void 0===c&&(c=t[a]),o?to(r,a,c):Xn(r,a,c)}return r},ro=eo,no=Tr;var oo=function(t,e){return t&&ro(e,no(e),t)};var io=D,uo=hr,ao=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},co=Object.prototype.hasOwnProperty;var so=lr,fo=function(t){if(!io(t))return ao(t);var e=uo(t),r=[];for(var n in t)("constructor"!=n||!e&&co.call(t,n))&&r.push(n);return r},lo=Or;var vo=function(t){return lo(t)?so(t,!0):fo(t)},ho=eo,po=vo;var yo=function(t,e){return t&&ho(e,po(e),t)},bo={};!function(t,e){var r=c,n=e&&!e.nodeType&&e,o=n&&t&&!t.nodeType&&t,i=o&&o.exports===n?r.Buffer:void 0,u=i?i.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=u?u(r):new t.constructor(r);return t.copy(n),n}}({get exports(){return bo},set exports(t){bo=t}},bo);var go=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var jo=function(){return[]},_o=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var u=t[r];e(u,r,t)&&(i[o++]=u)}return i},mo=jo,Oo=Object.prototype.propertyIsEnumerable,wo=Object.getOwnPropertySymbols,So=wo?function(t){return null==t?[]:(t=Object(t),_o(wo(t),(function(e){return Oo.call(t,e)})))}:mo,$o=eo,To=So;var Mo=function(t,e){return $o(t,To(t),e)};var xo=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},Ao=pr(Object.getPrototypeOf,Object),Do=xo,Po=Ao,Fo=So,Io=jo,No=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Do(e,Fo(t)),t=Po(t);return e}:Io,ko=eo,Co=No;var Eo=function(t,e){return ko(t,Co(t),e)},Wo=xo,zo=o;var Uo=function(t,e,r){var n=e(t);return zo(t)?n:Wo(n,r(t))},Ro=Uo,Lo=So,Yo=Tr;var Bo=function(t){return Ro(t,Yo,Lo)},Ho=Uo,Vo=No,Jo=vo;var qo=function(t){return Ho(t,Jo,Vo)},Go=Object.prototype.hasOwnProperty;var Zo=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Go.call(t,"index")&&(r.index=t.index,r.input=t.input),r},Qo=c.Uint8Array;var Ko=function(t){var e=new t.constructor(t.byteLength);return new Qo(e).set(new Qo(t)),e},Xo=Ko;var ti=function(t,e){var r=e?Xo(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},ei=/\w*$/;var ri=function(t){var e=new t.constructor(t.source,ei.exec(t));return e.lastIndex=t.lastIndex,e},ni=s?s.prototype:void 0,oi=ni?ni.valueOf:void 0;var ii=Ko;var ui=function(t,e){var r=e?ii(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},ai=Ko,ci=ti,si=ri,fi=function(t){return oi?Object(oi.call(t)):{}},li=ui;var vi=function(t,e,r){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return ai(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return ci(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return li(t,r);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return si(t);case"[object Symbol]":return fi(t)}},hi=D,pi=Object.create,yi=function(){function t(){}return function(e){if(!hi(e))return{};if(pi)return pi(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),bi=Ao,di=hr;var gi=function(t){return"function"!=typeof t.constructor||di(t)?{}:yi(bi(t))},ji=nn,_i=m;var mi=function(t){return _i(t)&&"[object Map]"==ji(t)},Oi=Ke,wi=Xe&&Xe.isMap,Si=wi?Oi(wi):mi,$i=nn,Ti=m;var Mi=function(t){return Ti(t)&&"[object Set]"==$i(t)},xi=Ke,Ai=Xe&&Xe.isSet,Di=Ai?xi(Ai):Mi,Pi=Bn,Fi=De,Ii=Kn,Ni=oo,ki=yo,Ci=bo,Ei=go,Wi=Mo,zi=Eo,Ui=Bo,Ri=qo,Li=nn,Yi=Zo,Bi=vi,Hi=gi,Vi=o,Ji=Le,qi=Si,Gi=D,Zi=Di,Qi=Tr,Ki=vo,Xi="[object Arguments]",tu="[object Function]",eu="[object Object]",ru={};ru[Xi]=ru["[object Array]"]=ru["[object ArrayBuffer]"]=ru["[object DataView]"]=ru["[object Boolean]"]=ru["[object Date]"]=ru["[object Float32Array]"]=ru["[object Float64Array]"]=ru["[object Int8Array]"]=ru["[object Int16Array]"]=ru["[object Int32Array]"]=ru["[object Map]"]=ru["[object Number]"]=ru[eu]=ru["[object RegExp]"]=ru["[object Set]"]=ru["[object String]"]=ru["[object Symbol]"]=ru["[object Uint8Array]"]=ru["[object Uint8ClampedArray]"]=ru["[object Uint16Array]"]=ru["[object Uint32Array]"]=!0,ru["[object Error]"]=ru[tu]=ru["[object WeakMap]"]=!1;var nu=function t(e,r,n,o,i,u){var a,c=1&r,s=2&r,f=4&r;if(n&&(a=i?n(e,o,i,u):n(e)),void 0!==a)return a;if(!Gi(e))return e;var l=Vi(e);if(l){if(a=Yi(e),!c)return Ei(e,a)}else{var v=Li(e),h=v==tu||"[object GeneratorFunction]"==v;if(Ji(e))return Ci(e,c);if(v==eu||v==Xi||h&&!i){if(a=s||h?{}:Hi(e),!c)return s?zi(e,ki(a,e)):Wi(e,Ni(a,e))}else{if(!ru[v])return i?e:{};a=Bi(e,v,c)}}u||(u=new Pi);var p=u.get(e);if(p)return p;u.set(e,a),Zi(e)?e.forEach((function(o){a.add(t(o,r,n,o,e,u))})):qi(e)&&e.forEach((function(o,i){a.set(i,t(o,r,n,i,e,u))}));var y=l?void 0:(f?s?Ri:Ui:s?Ki:Qi)(e);return Fi(y||e,(function(o,i){y&&(o=e[i=o]),Ii(a,i,t(o,r,n,i,e,u))})),a},ou=nu;var iu=function(t){return ou(t,5)};function uu(t){return"[object Array]"===Object.prototype.toString.call(t)}function au(t){return"[object String]"===Object.prototype.toString.call(t)}function cu(t){return!(!au(t)||""===t)}var su=/\s/;var fu=function(t){for(var e=t.length;e--&&su.test(t.charAt(e)););return e},lu=/^\s+/;var vu=function(t){return t?t.slice(0,fu(t)+1).replace(lu,""):t},hu=D,pu=S,yu=/^[-+]0x[0-9a-f]+$/i,bu=/^0b[01]+$/i,du=/^0o[0-7]+$/i,gu=parseInt;var ju=function(t){if("number"==typeof t)return t;if(pu(t))return NaN;if(hu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=hu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=vu(t);var r=bu.test(t);return r||du.test(t)?gu(t.slice(2),r?2:8):yu.test(t)?NaN:+t},_u=ju,mu=1/0;var Ou=function(t){return t?(t=_u(t))===mu||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0},wu=Ou;var Su=function(t){var e=wu(t),r=e%1;return e==e?r?e-r:e:0},$u=Su;var Tu=function(t){return"number"==typeof t&&t==$u(t)};function Mu(t){let e=!1;return cu(t)?e=!isNaN(Number(t)):function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)&&(e=!0),e}function xu(t){if(!Mu(t))return 0;return Ou(t)}var Au=Su,Du=ju,Pu=se,Fu=c.isFinite,Iu=Math.min;var Nu=function(t){var e=Math[t];return function(t,r){if(t=Du(t),(r=null==r?0:Iu(Au(r),292))&&Fu(t)){var n=(Pu(t)+"e").split("e"),o=e(n[0]+"e"+(+n[1]+r));return+((n=(Pu(o)+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}("round");function ku(t){if(!Mu(t))return 0;t=xu(t);let e=Nu(t);return"0"===String(e)?0:e}function Cu(t){if(!function(t){return!!Mu(t)&&(t=xu(t),Tu(t))}(t))return!1;return ku(t)>0}let Eu="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),Wu=Eu.length;function zu(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,e=[];t=Cu(t)?ku(t):32;for(let r=0;r<t;r++)e[r]=Eu[0|Math.random()*Wu];return e.join("")}var Uu=c,Ru=D,Lu=function(){return Uu.Date.now()},Yu=ju,Bu=Math.max,Hu=Math.min;var Vu=function(t,e,r){var n,o,i,u,a,c,s=0,f=!1,l=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(e){var r=n,i=o;return n=o=void 0,s=e,u=t.apply(i,r)}function p(t){var r=t-c;return void 0===c||r>=e||r<0||l&&t-s>=i}function y(){var t=Lu();if(p(t))return b(t);a=setTimeout(y,function(t){var r=e-(t-c);return l?Hu(r,i-(t-s)):r}(t))}function b(t){return a=void 0,v&&n?h(t):(n=o=void 0,u)}function d(){var t=Lu(),r=p(t);if(n=arguments,o=this,c=t,r){if(void 0===a)return function(t){return s=t,a=setTimeout(y,e),f?h(t):u}(c);if(l)return clearTimeout(a),a=setTimeout(y,e),h(c)}return void 0===a&&(a=setTimeout(y,e)),u}return e=Yu(e)||0,Ru(r)&&(f=!!r.leading,i=(l="maxWait"in r)?Bu(Yu(r.maxWait)||0,e):i,v="trailing"in r?!!r.trailing:v),d.cancel=function(){void 0!==a&&clearTimeout(a),s=0,n=c=o=a=void 0},d.flush=function(){return void 0===a?u:b(Lu())},d},Ju=qn,qu=dt;var Gu=function(t,e,r){(void 0!==r&&!qu(t[e],r)||void 0===r&&!(e in t))&&Ju(t,e,r)},Zu=Or,Qu=m;var Ku=function(t){return Qu(t)&&Zu(t)},Xu=_,ta=Ao,ea=m,ra=Function.prototype,na=Object.prototype,oa=ra.toString,ia=na.hasOwnProperty,ua=oa.call(Object);var aa=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},ca=eo,sa=vo;var fa=Gu,la=bo,va=ui,ha=go,pa=gi,ya=Re,ba=o,da=Ku,ga=Le,ja=N,_a=D,ma=function(t){if(!ea(t)||"[object Object]"!=Xu(t))return!1;var e=ta(t);if(null===e)return!0;var r=ia.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&oa.call(r)==ua},Oa=nr,wa=aa,Sa=function(t){return ca(t,sa(t))};var $a=Bn,Ta=Gu,Ma=Pe,xa=function(t,e,r,n,o,i,u){var a=wa(t,r),c=wa(e,r),s=u.get(c);if(s)fa(t,r,s);else{var f=i?i(a,c,r+"",t,e,u):void 0,l=void 0===f;if(l){var v=ba(c),h=!v&&ga(c),p=!v&&!h&&Oa(c);f=c,v||h||p?ba(a)?f=a:da(a)?f=ha(a):h?(l=!1,f=la(c,!0)):p?(l=!1,f=va(c,!0)):f=[]:ma(c)||ya(c)?(f=a,ya(a)?f=Sa(a):_a(a)&&!ja(a)||(f=pa(c))):l=!1}l&&(u.set(c,f),o(f,c,n,i,u),u.delete(c)),fa(t,r,f)}},Aa=D,Da=vo,Pa=aa;var Fa=function t(e,r,n,o,i){e!==r&&Ma(r,(function(u,a){if(i||(i=new $a),Aa(u))xa(e,r,a,n,t,o,i);else{var c=o?o(Pa(e,a),u,a+"",e,r,i):void 0;void 0===c&&(c=u),Ta(e,a,c)}}),Da)};var Ia=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)},Na=Math.max;var ka=function(t,e,r){return e=Na(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=Na(n.length-e,0),u=Array(i);++o<i;)u[o]=n[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=n[o];return a[e]=r(u),Ia(t,this,a)}};var Ca=function(t){return function(){return t}},Ea=Vn,Wa=Ea?function(t,e){return Ea(t,"toString",{configurable:!0,enumerable:!1,value:Ca(e),writable:!0})}:Pr,za=Date.now;var Ua=function(t){var e=0,r=0;return function(){var n=za(),o=16-(n-r);if(r=n,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}},Ra=Ua(Wa),La=Pr,Ya=ka,Ba=Ra;var Ha=dt,Va=Or,Ja=He,qa=D;var Ga=function(t,e){return Ba(Ya(t,e,La),t+"")},Za=function(t,e,r){if(!qa(r))return!1;var n=typeof e;return!!("number"==n?Va(r)&&Ja(e,r.length):"string"==n&&e in r)&&Ha(r[e],t)};var Qa=Fa,Ka=function(t){return Ga((function(e,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,u=o>2?r[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,u&&Za(r[0],r[1],u)&&(i=o<3?void 0:i,o=1),e=Object(e);++n<o;){var a=r[n];a&&t(e,a,n,i)}return e}))}((function(t,e,r){Qa(t,e,r)})),Xa={};!function(t,e){t.exports=function(){var t=1e3,e=6e4,r=36e5,n="millisecond",o="second",i="minute",u="hour",a="day",c="week",s="month",f="quarter",l="year",v="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],r=t%100;return"["+t+(e[(r-20)%10]||e[r]||e[0])+"]"}},d=function(t,e,r){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(r)+t},g={s:d,z:function(t){var e=-t.utcOffset(),r=Math.abs(e),n=Math.floor(r/60),o=r%60;return(e<=0?"+":"-")+d(n,2,"0")+":"+d(o,2,"0")},m:function t(e,r){if(e.date()<r.date())return-t(r,e);var n=12*(r.year()-e.year())+(r.month()-e.month()),o=e.clone().add(n,s),i=r-o<0,u=e.clone().add(n+(i?-1:1),s);return+(-(n+(r-o)/(i?o-u:u-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:s,y:l,w:c,d:a,D:v,h:u,m:i,s:o,ms:n,Q:f}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},j="en",_={};_[j]=b;var m=function(t){return t instanceof $},O=function t(e,r,n){var o;if(!e)return j;if("string"==typeof e){var i=e.toLowerCase();_[i]&&(o=i),r&&(_[i]=r,o=i);var u=e.split("-");if(!o&&u.length>1)return t(u[0])}else{var a=e.name;_[a]=e,o=a}return!n&&o&&(j=o),o||!n&&j},w=function(t,e){if(m(t))return t.clone();var r="object"==typeof e?e:{};return r.date=t,r.args=arguments,new $(r)},S=g;S.l=O,S.i=m,S.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var $=function(){function b(t){this.$L=O(t.locale,null,!0),this.parse(t)}var d=b.prototype;return d.parse=function(t){this.$d=function(t){var e=t.date,r=t.utc;if(null===e)return new Date(NaN);if(S.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(p);if(n){var o=n[2]-1||0,i=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},d.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},d.$utils=function(){return S},d.isValid=function(){return!(this.$d.toString()===h)},d.isSame=function(t,e){var r=w(t);return this.startOf(e)<=r&&r<=this.endOf(e)},d.isAfter=function(t,e){return w(t)<this.startOf(e)},d.isBefore=function(t,e){return this.endOf(e)<w(t)},d.$g=function(t,e,r){return S.u(t)?this[e]:this.set(r,t)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(t,e){var r=this,n=!!S.u(e)||e,f=S.p(t),h=function(t,e){var o=S.w(r.$u?Date.UTC(r.$y,e,t):new Date(r.$y,e,t),r);return n?o:o.endOf(a)},p=function(t,e){return S.w(r.toDate()[t].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(e)),r)},y=this.$W,b=this.$M,d=this.$D,g="set"+(this.$u?"UTC":"");switch(f){case l:return n?h(1,0):h(31,11);case s:return n?h(1,b):h(0,b+1);case c:var j=this.$locale().weekStart||0,_=(y<j?y+7:y)-j;return h(n?d-_:d+(6-_),b);case a:case v:return p(g+"Hours",0);case u:return p(g+"Minutes",1);case i:return p(g+"Seconds",2);case o:return p(g+"Milliseconds",3);default:return this.clone()}},d.endOf=function(t){return this.startOf(t,!1)},d.$set=function(t,e){var r,c=S.p(t),f="set"+(this.$u?"UTC":""),h=(r={},r[a]=f+"Date",r[v]=f+"Date",r[s]=f+"Month",r[l]=f+"FullYear",r[u]=f+"Hours",r[i]=f+"Minutes",r[o]=f+"Seconds",r[n]=f+"Milliseconds",r)[c],p=c===a?this.$D+(e-this.$W):e;if(c===s||c===l){var y=this.clone().set(v,1);y.$d[h](p),y.init(),this.$d=y.set(v,Math.min(this.$D,y.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},d.set=function(t,e){return this.clone().$set(t,e)},d.get=function(t){return this[S.p(t)]()},d.add=function(n,f){var v,h=this;n=Number(n);var p=S.p(f),y=function(t){var e=w(h);return S.w(e.date(e.date()+Math.round(t*n)),h)};if(p===s)return this.set(s,this.$M+n);if(p===l)return this.set(l,this.$y+n);if(p===a)return y(1);if(p===c)return y(7);var b=(v={},v[i]=e,v[u]=r,v[o]=t,v)[p]||1,d=this.$d.getTime()+n*b;return S.w(d,this)},d.subtract=function(t,e){return this.add(-1*t,e)},d.format=function(t){var e=this,r=this.$locale();if(!this.isValid())return r.invalidDate||h;var n=t||"YYYY-MM-DDTHH:mm:ssZ",o=S.z(this),i=this.$H,u=this.$m,a=this.$M,c=r.weekdays,s=r.months,f=function(t,r,o,i){return t&&(t[r]||t(e,n))||o[r].slice(0,i)},l=function(t){return S.s(i%12||12,t,"0")},v=r.meridiem||function(t,e,r){var n=t<12?"AM":"PM";return r?n.toLowerCase():n},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:S.s(a+1,2,"0"),MMM:f(r.monthsShort,a,s,3),MMMM:f(s,a),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:f(r.weekdaysMin,this.$W,c,2),ddd:f(r.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(i),HH:S.s(i,2,"0"),h:l(1),hh:l(2),a:v(i,u,!0),A:v(i,u,!1),m:String(u),mm:S.s(u,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:o};return n.replace(y,(function(t,e){return e||p[t]||o.replace(":","")}))},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(n,v,h){var p,y=S.p(v),b=w(n),d=(b.utcOffset()-this.utcOffset())*e,g=this-b,j=S.m(this,b);return j=(p={},p[l]=j/12,p[s]=j,p[f]=j/3,p[c]=(g-d)/6048e5,p[a]=(g-d)/864e5,p[u]=g/r,p[i]=g/e,p[o]=g/t,p)[y]||g,h?j:S.a(j)},d.daysInMonth=function(){return this.endOf(s).$D},d.$locale=function(){return _[this.$L]},d.locale=function(t,e){if(!t)return this.$L;var r=this.clone(),n=O(t,e,!0);return n&&(r.$L=n),r},d.clone=function(){return S.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},b}(),T=$.prototype;return w.prototype=T,[["$ms",n],["$s",o],["$m",i],["$H",u],["$W",a],["$M",s],["$y",l],["$D",v]].forEach((function(t){T[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,$,w),t.$i=!0),w},w.locale=O,w.isDayjs=m,w.unix=function(t){return w(1e3*t)},w.en=_[j],w.Ls=_,w.p={},w}()}({get exports(){return Xa},set exports(t){Xa=t}});var tc=Xa;function ec(t){return"[object Undefined]"===Object.prototype.toString.call(t)}let rc=t.resolve();function nc(){let t={},r=je(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"fnTableTags");cu(r)||(r="tableTags.json"),r=`${rc}/${r}`;let n=Me();function o(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];setTimeout((()=>{n.emit(t,...r)}),1)}function i(){let t={};try{if(e.existsSync(r)){let n=function(t){if(!cu(t))return{};let e={};try{e=JSON.parse(t)}catch(t){e={}}return e}(e.readFileSync(r,"utf8"));(function(t){if(_e(t)){for(let e in t)return!0;return!1}return!1})(n)&&(t=n)}}catch(t){o("error",{msg:"readTableTags catch",err:t})}return t}function u(){try{let n=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(ec(t))return"";let r="";try{r=e?JSON.stringify(t,null,2):JSON.stringify(t)}catch(t){r=""}return r}(t);e.writeFileSync(r,n,"utf8")}catch(t){o("error",{msg:"writeTableTags catch",err:t})}}let a=Vu((()=>{u(),o("changeTableTags",t)}),200);return n.readTableTags=i,n.writeTableTags=u,n.initTableTags=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"useInputFirst";t="useStorageFirst"===r?Ka(e,i()):"useInputOnly"===r?e:"useStorageOnly"===r?i():Ka(i(),e),u()},n.setTableTags=function(){t=Ka(t,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),u()},n.getTableTags=function(){return t},n.updateTableTag=function(e){t[e]=tc().format("YYYY-MM-DDTHH:mm:ssZ")+"|"+zu(6),a()},n}function oc(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Me(),r=je(t,"instWConverServer",null);if(null===r)return e.emit("error","invalid opt.instWConverServer"),e;let n=je(t,"dbORMs",null);if(!_e(n))return e.emit("error","invalid opt.dbORMs"),e;let o=je(t,"tableNames",null);if(!uu(o))return e.emit("error","invalid opt.tableNames"),e;0===Fn(o)&&console.log("opt.tableNames.lenght = 0");let i=je(t,"fnTableTags",null);cu(i)||(i="tableTags.json");let u=new nc({fnTableTags:i});o=iu(o);let a={};function c(t){let e={};return Wr(o,(r=>{let n=r,o=t[r];e[n]=o})),e}return Wr(o,(t=>{a[t]=zu(6)})),u.initTableTags(a,"useInputOnly"),Wr(o,(t=>{let e=n[t];if(!e)throw new Error(`invalid dbORMs.${t}`);e.on("change",(()=>{u.updateTableTag(t)}))})),r.on("clientEnter",(function(t,e){r.deliver(t,{mode:"syncTable",data:u.readTableTags()})})),u.on("changeTableTags",(t=>{r.broadcast({mode:"syncTable",data:c(t)})})),u}function ic(t){return ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ic(t)}function uc(t){var e=function(t,e){if("object"!==ic(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ic(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ic(e)?e:String(e)}function ac(t,e,r){return(e=uc(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cc(t){return!!ec(t)||(!!function(t){return"[object Null]"===Object.prototype.toString.call(t)}(t)||(!!function(t){if(_e(t)){for(let e in t)return!1;return!0}return!1}(t)||(!!function(t){return!(!au(t)||""!==t)}(t)||!!function(t){return!!uu(t)&&0===t.length}(t))))}function sc(t){return!!uu(t)&&(0!==t.length&&(1!==t.length||!cc(t[0])))}function fc(t){let e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e}function lc(t){let e,r=Object.prototype.toString.call(t);if(e="[object Promise]"===r,e)return!0;if("[object Function]"!==r)return!1;try{e="function"!=typeof t.subscribe&&"function"==typeof t.then}catch(t){}return e}function vc(t,e){return!!_e(t)&&(!(!cu(e)&&!Mu(e))&&e in t)}function hc(t){return function(){let e=function(){let t,e,r=new Promise((function(){t=arguments[0],e=arguments[1]}));return r.resolve=t,r.reject=e,r}(),r=null,n=null;try{r=t.apply(this,arguments)}catch(t){n=t}return null!==n?e.resolve({state:"error",msg:n}):lc(r)?r.then((function(t){e.resolve({state:"success",msg:t})})).catch((function(t){"cancelled"===je(t,"reason")?e.resolve({state:"cancelled",msg:""}):e.resolve({state:"error",msg:t})})):e.resolve({state:"success",msg:r}),e}}function pc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function yc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pc(Object(r),!0).forEach((function(e){ac(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}let bc={},dc=null;async function gc(t){let{func:e,input:r,pm:n}=t,o="";if(!vc(r,"__sysToken__"))return n.resolve({state:"error",msg:"invalid token"}),n;if(o=function(t){if(!cu(t)&&!Mu(t)&&!S(t))return"";let e="";try{e=String(t)}catch(t){}try{e=t.toString()}catch(t){}return e}(r.__sysToken__),!vc(r,"__sysInputArgs__"))return n.resolve({state:"error",msg:"invalid input"}),n;r=r.__sysInputArgs__;let i="",u=dc(o);if(i=lc(u)?await u:u,cu(i)||(i=""),"getFuncList"===e){let t={state:"success",msg:Tr(bc)};return n.resolve(t),n}if(!vc(bc,e))return n.resolve({state:"error",msg:`invalid func[${e}]`}),n;let a=bc[e];try{let t=await hc(a)(i,...r);n.resolve(t)}catch(t){n.resolve({state:"error",msg:`無法識別func: ${e}`})}return n}function jc(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Me(),r=je(t,"instWConverServer",null);if(null===r)return e.emit("error","invalid opt.instWConverServer"),e;dc=je(t,"cbGetUserIDFromToken",null),fc(dc)||(dc=async()=>"");let n=je(t,"useDbORM",null);Se(n)||(n=!0);let o=null;if(n&&(o=je(t,"operORM",null),!fc(o)))return e.emit("error","invalid opt.operORM when useDbORM=true"),e;let i=[];if(n&&(i=je(t,"tableNames",null),!uu(i)))return e.emit("error","invalid opt.tableNames when useDbORM=true"),e;let u=[];n&&(u=je(t,"methods",null),uu(u)||(u=["select","insert","save","del"]));let a=je(t,"extFuncs",null),c=je(t,"hookBefores",null),s=je(t,"hookAfters",null),f={};return n&&(i=iu(i),f=function(t,e,r){let n={};return Wr(t,(t=>{Wr(e,(e=>{n[`${t}.${e}`]=async function(n,o){return await r(n,t,e,o)}}))})),n}(i,u,o)),_e(a)&&Wr(a,((t,e)=>{f[e]=t})),bc=f,r.on("execute",(async function(t,r,n){let o={func:t,input:r,pm:n};if(fc(c))try{c(o)}catch(t){e.emit("error",t)}else sc(c)&&Wr(c,(t=>{if(fc(t))try{t(o)}catch(t){e.emit("error",t)}}));let i=await gc(o).catch((t=>{e.emit("error",t)})),u=yc(yc({},o),{},{output:i});if(fc(s))try{s(u)}catch(t){e.emit("error",t)}else sc(s)&&Wr(s,(t=>{if(fc(t))try{t(u)}catch(t){e.emit("error",t)}}))})),e}return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=null,r=null,n=Me(),o=je(t,"instWConverServer",null);if(null===o)return n.emit("error","invalid opt.instWConverServer"),n;let i=je(t,"useDbORM",null);Se(i)||(i=!0);let u=je(t,"dbORMs",null),a=je(t,"operORM",null),c=je(t,"tableNamesExec",null),s=je(t,"methodsExec",null),f=je(t,"tableNamesSync",null),l=je(t,"cbGetUserIDFromToken",null),v=je(t,"extFuncs",null),h=je(t,"hookBefores",null),p=je(t,"hookAfters",null),y=je(t,"fnTableTags",null);if(e=new jc({instWConverServer:o,cbGetUserIDFromToken:l,useDbORM:i,operORM:a,tableNames:c,methods:s,extFuncs:v,hookBefores:h,hookAfters:p}),e.on("error",(t=>{n.emit("error",t)})),i){if(!_e(u))return n.emit("error","invalid opt.dbORMs when useDbORM=true"),n;r=new oc({instWConverServer:o,dbORMs:u,tableNames:f,fnTableTags:y}),r.on("error",(t=>{n.emit("error",t)}))}return n.getInstWServWebdataServerExec=()=>e,n.getInstWServWebdataServerSync=()=>r,n}}));
//# sourceMappingURL=w-serv-webdata-server.umd.js.map
