/*!
 * w-serv-webdata-server v1.0.26
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("path"),require("fs")):"function"==typeof define&&define.amd?define(["path","fs"],r):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-serv-webdata-server"]=r(t.path,t.fs)}(this,(function(t,r){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(t),o=e(r),i=Array.isArray;function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}var u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function c(t){var r={exports:{}};return t(r,r.exports),r.exports}var s="object"==a(u)&&u&&u.Object===Object&&u,f="object"==("undefined"==typeof self?"undefined":a(self))&&self&&self.Object===Object&&self,l=s||f||Function("return this")(),v=l.Symbol,h=Object.prototype,p=h.hasOwnProperty,y=h.toString,d=v?v.toStringTag:void 0;var b=function(t){var r=p.call(t,d),e=t[d];try{t[d]=void 0;var n=!0}catch(t){}var o=y.call(t);return n&&(r?t[d]=e:delete t[d]),o},g=Object.prototype.toString;var m=function(t){return g.call(t)},j=v?v.toStringTag:void 0;var _=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":j&&j in Object(t)?b(t):m(t)};var w=function(t){return null!=t&&"object"==a(t)};var O=function(t){return"symbol"==a(t)||w(t)&&"[object Symbol]"==_(t)},S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,x=/^\w*$/;var $=function(t,r){if(i(t))return!1;var e=a(t);return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!O(t))||(x.test(t)||!S.test(t)||null!=r&&t in Object(r))};var T=function(t){var r=a(t);return null!=t&&("object"==r||"function"==r)};var M,A=function(t){if(!T(t))return!1;var r=_(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r},D=l["__core-js_shared__"],k=(M=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+M:"";var E=function(t){return!!k&&k in t},L=Function.prototype.toString;var P=function(t){if(null!=t){try{return L.call(t)}catch(t){}try{return t+""}catch(t){}}return""},F=/^\[object .+?Constructor\]$/,N=Function.prototype,I=Object.prototype,C=N.toString,R=I.hasOwnProperty,z=RegExp("^"+C.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var U=function(t){return!(!T(t)||E(t))&&(A(t)?z:F).test(P(t))};var W=function(t,r){return null==t?void 0:t[r]};var Y=function(t,r){var e=W(t,r);return U(e)?e:void 0},B=Y(Object,"create");var H=function(){this.__data__=B?B(null):{},this.size=0};var G=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},V=Object.prototype.hasOwnProperty;var J=function(t){var r=this.__data__;if(B){var e=r[t];return"__lodash_hash_undefined__"===e?void 0:e}return V.call(r,t)?r[t]:void 0},q=Object.prototype.hasOwnProperty;var Z=function(t){var r=this.__data__;return B?void 0!==r[t]:q.call(r,t)};var Q=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=B&&void 0===r?"__lodash_hash_undefined__":r,this};function K(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}K.prototype.clear=H,K.prototype.delete=G,K.prototype.get=J,K.prototype.has=Z,K.prototype.set=Q;var X=K;var tt=function(){this.__data__=[],this.size=0};var rt=function(t,r){return t===r||t!=t&&r!=r};var et=function(t,r){for(var e=t.length;e--;)if(rt(t[e][0],r))return e;return-1},nt=Array.prototype.splice;var ot=function(t){var r=this.__data__,e=et(r,t);return!(e<0)&&(e==r.length-1?r.pop():nt.call(r,e,1),--this.size,!0)};var it=function(t){var r=this.__data__,e=et(r,t);return e<0?void 0:r[e][1]};var at=function(t){return et(this.__data__,t)>-1};var ut=function(t,r){var e=this.__data__,n=et(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};function ct(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}ct.prototype.clear=tt,ct.prototype.delete=ot,ct.prototype.get=it,ct.prototype.has=at,ct.prototype.set=ut;var st=ct,ft=Y(l,"Map");var lt=function(){this.size=0,this.__data__={hash:new X,map:new(ft||st),string:new X}};var vt=function(t){var r=a(t);return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t};var ht=function(t,r){var e=t.__data__;return vt(r)?e["string"==typeof r?"string":"hash"]:e.map};var pt=function(t){var r=ht(this,t).delete(t);return this.size-=r?1:0,r};var yt=function(t){return ht(this,t).get(t)};var dt=function(t){return ht(this,t).has(t)};var bt=function(t,r){var e=ht(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this};function gt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}gt.prototype.clear=lt,gt.prototype.delete=pt,gt.prototype.get=yt,gt.prototype.has=dt,gt.prototype.set=bt;var mt=gt;function jt(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError("Expected a function");var e=function e(){var n=arguments,o=r?r.apply(this,n):n[0],i=e.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return e.cache=i.set(o,a)||i,a};return e.cache=new(jt.Cache||mt),e}jt.Cache=mt;var _t=jt;var wt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ot=/\\(\\)?/g,St=function(t){var r=_t(t,(function(t){return 500===e.size&&e.clear(),t})),e=r.cache;return r}((function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(wt,(function(t,e,n,o){r.push(n?o.replace(Ot,"$1"):e||t)})),r}));var xt=function(t,r){for(var e=-1,n=null==t?0:t.length,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o},$t=v?v.prototype:void 0,Tt=$t?$t.toString:void 0;var Mt=function t(r){if("string"==typeof r)return r;if(i(r))return xt(r,t)+"";if(O(r))return Tt?Tt.call(r):"";var e=r+"";return"0"==e&&1/r==-Infinity?"-0":e};var At=function(t){return null==t?"":Mt(t)};var Dt=function(t,r){return i(t)?t:$(t,r)?[t]:St(At(t))};var kt=function(t){if("string"==typeof t||O(t))return t;var r=t+"";return"0"==r&&1/t==-Infinity?"-0":r};var Et=function(t,r){for(var e=0,n=(r=Dt(r,t)).length;null!=t&&e<n;)t=t[kt(r[e++])];return e&&e==n?t:void 0};var Lt=function(t,r,e){var n=null==t?void 0:Et(t,r);return void 0===n?e:n};function Pt(t){return"[object Object]"===Object.prototype.toString.call(t)}var Ft=function(t){return!0===t||!1===t||w(t)&&"[object Boolean]"==_(t)};function Nt(t){return Ft(t)}var It=c((function(t){var r=Object.prototype.hasOwnProperty,e="~";function n(){}function o(t,r,e){this.fn=t,this.context=r,this.once=e||!1}function i(t,r,n,i,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var u=new o(n,i||t,a),c=e?e+r:r;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],u]:t._events[c].push(u):(t._events[c]=u,t._eventsCount++),t}function a(t,r){0==--t._eventsCount?t._events=new n:delete t._events[r]}function u(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(e=!1)),u.prototype.eventNames=function(){var t,n,o=[];if(0===this._eventsCount)return o;for(n in t=this._events)r.call(t,n)&&o.push(e?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},u.prototype.listeners=function(t){var r=e?e+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,a=new Array(i);o<i;o++)a[o]=n[o].fn;return a},u.prototype.listenerCount=function(t){var r=e?e+t:t,n=this._events[r];return n?n.fn?1:n.length:0},u.prototype.emit=function(t,r,n,o,i,a){var u=e?e+t:t;if(!this._events[u])return!1;var c,s,f=this._events[u],l=arguments.length;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),l){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,r),!0;case 3:return f.fn.call(f.context,r,n),!0;case 4:return f.fn.call(f.context,r,n,o),!0;case 5:return f.fn.call(f.context,r,n,o,i),!0;case 6:return f.fn.call(f.context,r,n,o,i,a),!0}for(s=1,c=new Array(l-1);s<l;s++)c[s-1]=arguments[s];f.fn.apply(f.context,c)}else{var v,h=f.length;for(s=0;s<h;s++)switch(f[s].once&&this.removeListener(t,f[s].fn,void 0,!0),l){case 1:f[s].fn.call(f[s].context);break;case 2:f[s].fn.call(f[s].context,r);break;case 3:f[s].fn.call(f[s].context,r,n);break;case 4:f[s].fn.call(f[s].context,r,n,o);break;default:if(!c)for(v=1,c=new Array(l-1);v<l;v++)c[v-1]=arguments[v];f[s].fn.apply(f[s].context,c)}}return!0},u.prototype.on=function(t,r,e){return i(this,t,r,e,!1)},u.prototype.once=function(t,r,e){return i(this,t,r,e,!0)},u.prototype.removeListener=function(t,r,n,o){var i=e?e+t:t;if(!this._events[i])return this;if(!r)return a(this,i),this;var u=this._events[i];if(u.fn)u.fn!==r||o&&!u.once||n&&u.context!==n||a(this,i);else{for(var c=0,s=[],f=u.length;c<f;c++)(u[c].fn!==r||o&&!u[c].once||n&&u[c].context!==n)&&s.push(u[c]);s.length?this._events[i]=1===s.length?s[0]:s:a(this,i)}return this},u.prototype.removeAllListeners=function(t){var r;return t?(r=e?e+t:t,this._events[r]&&a(this,r)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,t.exports=u}));function Ct(){return new It}var Rt=function(t,r){for(var e=-1,n=null==t?0:t.length;++e<n&&!1!==r(t[e],e,t););return t};var zt=function(t){return function(r,e,n){for(var o=-1,i=Object(r),a=n(r),u=a.length;u--;){var c=a[t?u:++o];if(!1===e(i[c],c,i))break}return r}}();var Ut=function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n};var Wt=function(t){return w(t)&&"[object Arguments]"==_(t)},Yt=Object.prototype,Bt=Yt.hasOwnProperty,Ht=Yt.propertyIsEnumerable,Gt=Wt(function(){return arguments}())?Wt:function(t){return w(t)&&Bt.call(t,"callee")&&!Ht.call(t,"callee")},Vt=Gt;var Jt=function(){return!1},qt=c((function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e?l.Buffer:void 0,i=(o?o.isBuffer:void 0)||Jt;t.exports=i})),Zt=/^(?:0|[1-9]\d*)$/;var Qt=function(t,r){var e=a(t);return!!(r=null==r?9007199254740991:r)&&("number"==e||"symbol"!=e&&Zt.test(t))&&t>-1&&t%1==0&&t<r};var Kt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Xt={};Xt["[object Float32Array]"]=Xt["[object Float64Array]"]=Xt["[object Int8Array]"]=Xt["[object Int16Array]"]=Xt["[object Int32Array]"]=Xt["[object Uint8Array]"]=Xt["[object Uint8ClampedArray]"]=Xt["[object Uint16Array]"]=Xt["[object Uint32Array]"]=!0,Xt["[object Arguments]"]=Xt["[object Array]"]=Xt["[object ArrayBuffer]"]=Xt["[object Boolean]"]=Xt["[object DataView]"]=Xt["[object Date]"]=Xt["[object Error]"]=Xt["[object Function]"]=Xt["[object Map]"]=Xt["[object Number]"]=Xt["[object Object]"]=Xt["[object RegExp]"]=Xt["[object Set]"]=Xt["[object String]"]=Xt["[object WeakMap]"]=!1;var tr=function(t){return w(t)&&Kt(t.length)&&!!Xt[_(t)]};var rr=function(t){return function(r){return t(r)}},er=c((function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e&&s.process,i=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i})),nr=er&&er.isTypedArray,or=nr?rr(nr):tr,ir=Object.prototype.hasOwnProperty;var ar=function(t,r){var e=i(t),n=!e&&Vt(t),o=!e&&!n&&qt(t),a=!e&&!n&&!o&&or(t),u=e||n||o||a,c=u?Ut(t.length,String):[],s=c.length;for(var f in t)!r&&!ir.call(t,f)||u&&("length"==f||o&&("offset"==f||"parent"==f)||a&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||Qt(f,s))||c.push(f);return c},ur=Object.prototype;var cr=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||ur)};var sr=function(t,r){return function(e){return t(r(e))}},fr=sr(Object.keys,Object),lr=Object.prototype.hasOwnProperty;var vr=function(t){if(!cr(t))return fr(t);var r=[];for(var e in Object(t))lr.call(t,e)&&"constructor"!=e&&r.push(e);return r};var hr=function(t){return null!=t&&Kt(t.length)&&!A(t)};var pr=function(t){return hr(t)?ar(t):vr(t)};var yr=function(t,r){return function(e,n){if(null==e)return e;if(!hr(e))return t(e,n);for(var o=e.length,i=r?o:-1,a=Object(e);(r?i--:++i<o)&&!1!==n(a[i],i,a););return e}}((function(t,r){return t&&zt(t,r,pr)}));var dr=function(t){return t};var br=function(t){return"function"==typeof t?t:dr};var gr=function(t,r){return(i(t)?Rt:yr)(t,br(r))},mr=Y(l,"DataView"),jr=Y(l,"Promise"),_r=Y(l,"Set"),wr=Y(l,"WeakMap"),Or="[object Map]",Sr="[object Promise]",xr="[object Set]",$r="[object WeakMap]",Tr="[object DataView]",Mr=P(mr),Ar=P(ft),Dr=P(jr),kr=P(_r),Er=P(wr),Lr=_;(mr&&Lr(new mr(new ArrayBuffer(1)))!=Tr||ft&&Lr(new ft)!=Or||jr&&Lr(jr.resolve())!=Sr||_r&&Lr(new _r)!=xr||wr&&Lr(new wr)!=$r)&&(Lr=function(t){var r=_(t),e="[object Object]"==r?t.constructor:void 0,n=e?P(e):"";if(n)switch(n){case Mr:return Tr;case Ar:return Or;case Dr:return Sr;case kr:return xr;case Er:return $r}return r});var Pr=Lr;var Fr=function(t){return"string"==typeof t||!i(t)&&w(t)&&"[object String]"==_(t)};var Nr=function(t){return function(r){return null==r?void 0:r[t]}}("length"),Ir=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Cr=function(t){return Ir.test(t)},Rr="[\\ud800-\\udfff]",zr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ur="\\ud83c[\\udffb-\\udfff]",Wr="[^\\ud800-\\udfff]",Yr="(?:\\ud83c[\\udde6-\\uddff]){2}",Br="[\\ud800-\\udbff][\\udc00-\\udfff]",Hr="(?:"+zr+"|"+Ur+")"+"?",Gr="[\\ufe0e\\ufe0f]?",Vr=Gr+Hr+("(?:\\u200d(?:"+[Wr,Yr,Br].join("|")+")"+Gr+Hr+")*"),Jr="(?:"+[Wr+zr+"?",zr,Yr,Br,Rr].join("|")+")",qr=RegExp(Ur+"(?="+Ur+")|"+Jr+Vr,"g");var Zr=function(t){for(var r=qr.lastIndex=0;qr.test(t);)++r;return r};var Qr=function(t){return Cr(t)?Zr(t):Nr(t)};var Kr=function(t){if(null==t)return 0;if(hr(t))return Fr(t)?Qr(t):t.length;var r=Pr(t);return"[object Map]"==r||"[object Set]"==r?t.size:vr(t).length};var Xr=function(){this.__data__=new st,this.size=0};var te=function(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e};var re=function(t){return this.__data__.get(t)};var ee=function(t){return this.__data__.has(t)};var ne=function(t,r){var e=this.__data__;if(e instanceof st){var n=e.__data__;if(!ft||n.length<199)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new mt(n)}return e.set(t,r),this.size=e.size,this};function oe(t){var r=this.__data__=new st(t);this.size=r.size}oe.prototype.clear=Xr,oe.prototype.delete=te,oe.prototype.get=re,oe.prototype.has=ee,oe.prototype.set=ne;var ie=oe,ae=function(){try{var t=Y(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var ue=function(t,r,e){"__proto__"==r&&ae?ae(t,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[r]=e},ce=Object.prototype.hasOwnProperty;var se=function(t,r,e){var n=t[r];ce.call(t,r)&&rt(n,e)&&(void 0!==e||r in t)||ue(t,r,e)};var fe=function(t,r,e,n){var o=!e;e||(e={});for(var i=-1,a=r.length;++i<a;){var u=r[i],c=n?n(e[u],t[u],u,e,t):void 0;void 0===c&&(c=t[u]),o?ue(e,u,c):se(e,u,c)}return e};var le=function(t,r){return t&&fe(r,pr(r),t)};var ve=function(t){var r=[];if(null!=t)for(var e in Object(t))r.push(e);return r},he=Object.prototype.hasOwnProperty;var pe=function(t){if(!T(t))return ve(t);var r=cr(t),e=[];for(var n in t)("constructor"!=n||!r&&he.call(t,n))&&e.push(n);return e};var ye=function(t){return hr(t)?ar(t,!0):pe(t)};var de=function(t,r){return t&&fe(r,ye(r),t)},be=c((function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e?l.Buffer:void 0,i=o?o.allocUnsafe:void 0;t.exports=function(t,r){if(r)return t.slice();var e=t.length,n=i?i(e):new t.constructor(e);return t.copy(n),n}}));var ge=function(t,r){var e=-1,n=t.length;for(r||(r=Array(n));++e<n;)r[e]=t[e];return r};var me=function(t,r){for(var e=-1,n=null==t?0:t.length,o=0,i=[];++e<n;){var a=t[e];r(a,e,t)&&(i[o++]=a)}return i};var je=function(){return[]},_e=Object.prototype.propertyIsEnumerable,we=Object.getOwnPropertySymbols,Oe=we?function(t){return null==t?[]:(t=Object(t),me(we(t),(function(r){return _e.call(t,r)})))}:je;var Se=function(t,r){return fe(t,Oe(t),r)};var xe=function(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t},$e=sr(Object.getPrototypeOf,Object),Te=Object.getOwnPropertySymbols?function(t){for(var r=[];t;)xe(r,Oe(t)),t=$e(t);return r}:je;var Me=function(t,r){return fe(t,Te(t),r)};var Ae=function(t,r,e){var n=r(t);return i(t)?n:xe(n,e(t))};var De=function(t){return Ae(t,pr,Oe)};var ke=function(t){return Ae(t,ye,Te)},Ee=Object.prototype.hasOwnProperty;var Le=function(t){var r=t.length,e=new t.constructor(r);return r&&"string"==typeof t[0]&&Ee.call(t,"index")&&(e.index=t.index,e.input=t.input),e},Pe=l.Uint8Array;var Fe=function(t){var r=new t.constructor(t.byteLength);return new Pe(r).set(new Pe(t)),r};var Ne=function(t,r){var e=r?Fe(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)},Ie=/\w*$/;var Ce=function(t){var r=new t.constructor(t.source,Ie.exec(t));return r.lastIndex=t.lastIndex,r},Re=v?v.prototype:void 0,ze=Re?Re.valueOf:void 0;var Ue=function(t){return ze?Object(ze.call(t)):{}};var We=function(t,r){var e=r?Fe(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)};var Ye=function(t,r,e){var n=t.constructor;switch(r){case"[object ArrayBuffer]":return Fe(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return Ne(t,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return We(t,e);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return Ce(t);case"[object Symbol]":return Ue(t)}},Be=Object.create,He=function(){function t(){}return function(r){if(!T(r))return{};if(Be)return Be(r);t.prototype=r;var e=new t;return t.prototype=void 0,e}}();var Ge=function(t){return"function"!=typeof t.constructor||cr(t)?{}:He($e(t))};var Ve=function(t){return w(t)&&"[object Map]"==Pr(t)},Je=er&&er.isMap,qe=Je?rr(Je):Ve;var Ze=function(t){return w(t)&&"[object Set]"==Pr(t)},Qe=er&&er.isSet,Ke=Qe?rr(Qe):Ze,Xe="[object Arguments]",tn="[object Function]",rn="[object Object]",en={};en[Xe]=en["[object Array]"]=en["[object ArrayBuffer]"]=en["[object DataView]"]=en["[object Boolean]"]=en["[object Date]"]=en["[object Float32Array]"]=en["[object Float64Array]"]=en["[object Int8Array]"]=en["[object Int16Array]"]=en["[object Int32Array]"]=en["[object Map]"]=en["[object Number]"]=en[rn]=en["[object RegExp]"]=en["[object Set]"]=en["[object String]"]=en["[object Symbol]"]=en["[object Uint8Array]"]=en["[object Uint8ClampedArray]"]=en["[object Uint16Array]"]=en["[object Uint32Array]"]=!0,en["[object Error]"]=en[tn]=en["[object WeakMap]"]=!1;var nn=function t(r,e,n,o,a,u){var c,s=1&e,f=2&e,l=4&e;if(n&&(c=a?n(r,o,a,u):n(r)),void 0!==c)return c;if(!T(r))return r;var v=i(r);if(v){if(c=Le(r),!s)return ge(r,c)}else{var h=Pr(r),p=h==tn||"[object GeneratorFunction]"==h;if(qt(r))return be(r,s);if(h==rn||h==Xe||p&&!a){if(c=f||p?{}:Ge(r),!s)return f?Me(r,de(c,r)):Se(r,le(c,r))}else{if(!en[h])return a?r:{};c=Ye(r,h,s)}}u||(u=new ie);var y=u.get(r);if(y)return y;u.set(r,c),Ke(r)?r.forEach((function(o){c.add(t(o,e,n,o,r,u))})):qe(r)&&r.forEach((function(o,i){c.set(i,t(o,e,n,i,r,u))}));var d=v?void 0:(l?f?ke:De:f?ye:pr)(r);return Rt(d||r,(function(o,i){d&&(o=r[i=o]),se(c,i,t(o,e,n,i,r,u))})),c};var on=function(t){return nn(t,5)};function an(t){return"[object Array]"===Object.prototype.toString.call(t)}function un(t){return"[object String]"===Object.prototype.toString.call(t)}function cn(t){return!(!un(t)||""===t)}var sn=/\s/;var fn=function(t){for(var r=t.length;r--&&sn.test(t.charAt(r)););return r},ln=/^\s+/;var vn=function(t){return t?t.slice(0,fn(t)+1).replace(ln,""):t},hn=/^[-+]0x[0-9a-f]+$/i,pn=/^0b[01]+$/i,yn=/^0o[0-7]+$/i,dn=parseInt;var bn=function(t){if("number"==typeof t)return t;if(O(t))return NaN;if(T(t)){var r="function"==typeof t.valueOf?t.valueOf():t;t=T(r)?r+"":r}if("string"!=typeof t)return 0===t?t:+t;t=vn(t);var e=pn.test(t);return e||yn.test(t)?dn(t.slice(2),e?2:8):hn.test(t)?NaN:+t},gn=1/0;var mn=function(t){return t?(t=bn(t))===gn||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var jn=function(t){var r=mn(t),e=r%1;return r==r?e?r-e:r:0};var _n=function(t){return"number"==typeof t&&t==jn(t)};function wn(t){var r=!1;return cn(t)?r=!isNaN(Number(t)):function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)&&(r=!0),r}function On(t){return wn(t)?mn(t):0}var Sn=l.isFinite,xn=Math.min;var $n=function(t){var r=Math[t];return function(t,e){if(t=bn(t),(e=null==e?0:xn(jn(e),292))&&Sn(t)){var n=(At(t)+"e").split("e"),o=r(n[0]+"e"+(+n[1]+e));return+((n=(At(o)+"e").split("e"))[0]+"e"+(+n[1]-e))}return r(t)}}("round");function Tn(t){if(!wn(t))return 0;t=On(t);var r=$n(t);return"0"===String(r)?0:r}function Mn(t){return!!function(t){return!!wn(t)&&(t=On(t),_n(t))}(t)&&Tn(t)>0}var An="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),Dn=An.length;function kn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,r=[];t=Mn(t)?Tn(t):32;for(var e=0;e<t;e++)r[e]=An[0|Math.random()*Dn];var n=r.join("");return n}var En=function(){return l.Date.now()},Ln=Math.max,Pn=Math.min;var Fn=function(t,r,e){var n,o,i,a,u,c,s=0,f=!1,l=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(r){var e=n,i=o;return n=o=void 0,s=r,a=t.apply(i,e)}function p(t){return s=t,u=setTimeout(d,r),f?h(t):a}function y(t){var e=t-c;return void 0===c||e>=r||e<0||l&&t-s>=i}function d(){var t=En();if(y(t))return b(t);u=setTimeout(d,function(t){var e=r-(t-c);return l?Pn(e,i-(t-s)):e}(t))}function b(t){return u=void 0,v&&n?h(t):(n=o=void 0,a)}function g(){var t=En(),e=y(t);if(n=arguments,o=this,c=t,e){if(void 0===u)return p(c);if(l)return clearTimeout(u),u=setTimeout(d,r),h(c)}return void 0===u&&(u=setTimeout(d,r)),a}return r=bn(r)||0,T(e)&&(f=!!e.leading,i=(l="maxWait"in e)?Ln(bn(e.maxWait)||0,r):i,v="trailing"in e?!!e.trailing:v),g.cancel=function(){void 0!==u&&clearTimeout(u),s=0,n=c=o=u=void 0},g.flush=function(){return void 0===u?a:b(En())},g};var Nn=function(t,r,e){(void 0!==e&&!rt(t[r],e)||void 0===e&&!(r in t))&&ue(t,r,e)};var In=function(t){return w(t)&&hr(t)},Cn=Function.prototype,Rn=Object.prototype,zn=Cn.toString,Un=Rn.hasOwnProperty,Wn=zn.call(Object);var Yn=function(t){if(!w(t)||"[object Object]"!=_(t))return!1;var r=$e(t);if(null===r)return!0;var e=Un.call(r,"constructor")&&r.constructor;return"function"==typeof e&&e instanceof e&&zn.call(e)==Wn};var Bn=function(t,r){if(("constructor"!==r||"function"!=typeof t[r])&&"__proto__"!=r)return t[r]};var Hn=function(t){return fe(t,ye(t))};var Gn=function(t,r,e,n,o,a,u){var c=Bn(t,e),s=Bn(r,e),f=u.get(s);if(f)Nn(t,e,f);else{var l=a?a(c,s,e+"",t,r,u):void 0,v=void 0===l;if(v){var h=i(s),p=!h&&qt(s),y=!h&&!p&&or(s);l=s,h||p||y?i(c)?l=c:In(c)?l=ge(c):p?(v=!1,l=be(s,!0)):y?(v=!1,l=We(s,!0)):l=[]:Yn(s)||Vt(s)?(l=c,Vt(c)?l=Hn(c):T(c)&&!A(c)||(l=Ge(s))):v=!1}v&&(u.set(s,l),o(l,s,n,a,u),u.delete(s)),Nn(t,e,l)}};var Vn=function t(r,e,n,o,i){r!==e&&zt(e,(function(a,u){if(i||(i=new ie),T(a))Gn(r,e,u,n,t,o,i);else{var c=o?o(Bn(r,u),a,u+"",r,e,i):void 0;void 0===c&&(c=a),Nn(r,u,c)}}),ye)};var Jn=function(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)},qn=Math.max;var Zn=function(t,r,e){return r=qn(void 0===r?t.length-1:r,0),function(){for(var n=arguments,o=-1,i=qn(n.length-r,0),a=Array(i);++o<i;)a[o]=n[r+o];o=-1;for(var u=Array(r+1);++o<r;)u[o]=n[o];return u[r]=e(a),Jn(t,this,u)}};var Qn=function(t){return function(){return t}},Kn=ae?function(t,r){return ae(t,"toString",{configurable:!0,enumerable:!1,value:Qn(r),writable:!0})}:dr,Xn=Date.now;var to=function(t){var r=0,e=0;return function(){var n=Xn(),o=16-(n-e);if(e=n,o>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}},ro=to(Kn);var eo=function(t,r){return ro(Zn(t,r,dr),t+"")};var no=function(t,r,e){if(!T(e))return!1;var n=a(r);return!!("number"==n?hr(e)&&Qt(r,e.length):"string"==n&&r in e)&&rt(e[r],t)};var oo=function(t){return eo((function(r,e){var n=-1,o=e.length,i=o>1?e[o-1]:void 0,a=o>2?e[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,a&&no(e[0],e[1],a)&&(i=o<3?void 0:i,o=1),r=Object(r);++n<o;){var u=e[n];u&&t(r,u,n,i)}return r}))}((function(t,r,e){Vn(t,r,e)})),io=c((function(t,r){t.exports=function(){var t=1e3,r=6e4,e=36e5,n="millisecond",o="second",i="minute",u="hour",c="day",s="week",f="month",l="quarter",v="year",h="date",p="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},g=function(t,r,e){var n=String(t);return!n||n.length>=r?t:""+Array(r+1-n.length).join(e)+t},m={s:g,z:function(t){var r=-t.utcOffset(),e=Math.abs(r),n=Math.floor(e/60),o=e%60;return(r<=0?"+":"-")+g(n,2,"0")+":"+g(o,2,"0")},m:function t(r,e){if(r.date()<e.date())return-t(e,r);var n=12*(e.year()-r.year())+(e.month()-r.month()),o=r.clone().add(n,f),i=e-o<0,a=r.clone().add(n+(i?-1:1),f);return+(-(n+(e-o)/(i?o-a:a-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:f,y:v,w:s,d:c,D:h,h:u,m:i,s:o,ms:n,Q:l}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},j="en",_={};_[j]=b;var w=function(t){return t instanceof $},O=function t(r,e,n){var o;if(!r)return j;if("string"==typeof r){var i=r.toLowerCase();_[i]&&(o=i),e&&(_[i]=e,o=i);var a=r.split("-");if(!o&&a.length>1)return t(a[0])}else{var u=r.name;_[u]=r,o=u}return!n&&o&&(j=o),o||!n&&j},S=function(t,r){if(w(t))return t.clone();var e="object"==a(r)?r:{};return e.date=t,e.args=arguments,new $(e)},x=m;x.l=O,x.i=w,x.w=function(t,r){return S(t,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var $=function(){function a(t){this.$L=O(t.locale,null,!0),this.parse(t)}var b=a.prototype;return b.parse=function(t){this.$d=function(t){var r=t.date,e=t.utc;if(null===r)return new Date(NaN);if(x.u(r))return new Date;if(r instanceof Date)return new Date(r);if("string"==typeof r&&!/Z$/i.test(r)){var n=r.match(y);if(n){var o=n[2]-1||0,i=(n[7]||"0").substring(0,3);return e?new Date(Date.UTC(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(r)}(t),this.$x=t.x||{},this.init()},b.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},b.$utils=function(){return x},b.isValid=function(){return!(this.$d.toString()===p)},b.isSame=function(t,r){var e=S(t);return this.startOf(r)<=e&&e<=this.endOf(r)},b.isAfter=function(t,r){return S(t)<this.startOf(r)},b.isBefore=function(t,r){return this.endOf(r)<S(t)},b.$g=function(t,r,e){return x.u(t)?this[r]:this.set(e,t)},b.unix=function(){return Math.floor(this.valueOf()/1e3)},b.valueOf=function(){return this.$d.getTime()},b.startOf=function(t,r){var e=this,n=!!x.u(r)||r,a=x.p(t),l=function(t,r){var o=x.w(e.$u?Date.UTC(e.$y,r,t):new Date(e.$y,r,t),e);return n?o:o.endOf(c)},p=function(t,r){return x.w(e.toDate()[t].apply(e.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(r)),e)},y=this.$W,d=this.$M,b=this.$D,g="set"+(this.$u?"UTC":"");switch(a){case v:return n?l(1,0):l(31,11);case f:return n?l(1,d):l(0,d+1);case s:var m=this.$locale().weekStart||0,j=(y<m?y+7:y)-m;return l(n?b-j:b+(6-j),d);case c:case h:return p(g+"Hours",0);case u:return p(g+"Minutes",1);case i:return p(g+"Seconds",2);case o:return p(g+"Milliseconds",3);default:return this.clone()}},b.endOf=function(t){return this.startOf(t,!1)},b.$set=function(t,r){var e,a=x.p(t),s="set"+(this.$u?"UTC":""),l=(e={},e[c]=s+"Date",e[h]=s+"Date",e[f]=s+"Month",e[v]=s+"FullYear",e[u]=s+"Hours",e[i]=s+"Minutes",e[o]=s+"Seconds",e[n]=s+"Milliseconds",e)[a],p=a===c?this.$D+(r-this.$W):r;if(a===f||a===v){var y=this.clone().set(h,1);y.$d[l](p),y.init(),this.$d=y.set(h,Math.min(this.$D,y.daysInMonth())).$d}else l&&this.$d[l](p);return this.init(),this},b.set=function(t,r){return this.clone().$set(t,r)},b.get=function(t){return this[x.p(t)]()},b.add=function(n,a){var l,h=this;n=Number(n);var p=x.p(a),y=function(t){var r=S(h);return x.w(r.date(r.date()+Math.round(t*n)),h)};if(p===f)return this.set(f,this.$M+n);if(p===v)return this.set(v,this.$y+n);if(p===c)return y(1);if(p===s)return y(7);var d=(l={},l[i]=r,l[u]=e,l[o]=t,l)[p]||1,b=this.$d.getTime()+n*d;return x.w(b,this)},b.subtract=function(t,r){return this.add(-1*t,r)},b.format=function(t){var r=this,e=this.$locale();if(!this.isValid())return e.invalidDate||p;var n=t||"YYYY-MM-DDTHH:mm:ssZ",o=x.z(this),i=this.$H,a=this.$m,u=this.$M,c=e.weekdays,s=e.months,f=function(t,e,o,i){return t&&(t[e]||t(r,n))||o[e].substr(0,i)},l=function(t){return x.s(i%12||12,t,"0")},v=e.meridiem||function(t,r,e){var n=t<12?"AM":"PM";return e?n.toLowerCase():n},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:u+1,MM:x.s(u+1,2,"0"),MMM:f(e.monthsShort,u,s,3),MMMM:f(s,u),D:this.$D,DD:x.s(this.$D,2,"0"),d:String(this.$W),dd:f(e.weekdaysMin,this.$W,c,2),ddd:f(e.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(i),HH:x.s(i,2,"0"),h:l(1),hh:l(2),a:v(i,a,!0),A:v(i,a,!1),m:String(a),mm:x.s(a,2,"0"),s:String(this.$s),ss:x.s(this.$s,2,"0"),SSS:x.s(this.$ms,3,"0"),Z:o};return n.replace(d,(function(t,r){return r||h[t]||o.replace(":","")}))},b.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},b.diff=function(n,a,h){var p,y=x.p(a),d=S(n),b=(d.utcOffset()-this.utcOffset())*r,g=this-d,m=x.m(this,d);return m=(p={},p[v]=m/12,p[f]=m,p[l]=m/3,p[s]=(g-b)/6048e5,p[c]=(g-b)/864e5,p[u]=g/e,p[i]=g/r,p[o]=g/t,p)[y]||g,h?m:x.a(m)},b.daysInMonth=function(){return this.endOf(f).$D},b.$locale=function(){return _[this.$L]},b.locale=function(t,r){if(!t)return this.$L;var e=this.clone(),n=O(t,r,!0);return n&&(e.$L=n),e},b.clone=function(){return x.w(this.$d,this)},b.toDate=function(){return new Date(this.valueOf())},b.toJSON=function(){return this.isValid()?this.toISOString():null},b.toISOString=function(){return this.$d.toISOString()},b.toString=function(){return this.$d.toUTCString()},a}(),T=$.prototype;return S.prototype=T,[["$ms",n],["$s",o],["$m",i],["$H",u],["$W",c],["$M",f],["$y",v],["$D",h]].forEach((function(t){T[t[1]]=function(r){return this.$g(r,t[0],t[1])}})),S.extend=function(t,r){return t.$i||(t(r,$,S),t.$i=!0),S},S.locale=O,S.isDayjs=w,S.unix=function(t){return S(1e3*t)},S.en=_[j],S.Ls=_,S.p={},S}()}));function ao(){return io().format("YYYY-MM-DDTHH:mm:ssZ")}function uo(t){if(Pt(t)){for(var r in t)return!0;return!1}return!1}function co(t){if(!cn(t))return{};var r={};try{r=JSON.parse(t)}catch(t){r={}}return r}function so(t){return"[object Undefined]"===Object.prototype.toString.call(t)}function fo(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(so(t))return"";var e="";try{e=r?JSON.stringify(t,null,2):JSON.stringify(t)}catch(t){e=""}return e}var lo=n.default.resolve();function vo(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={},e=Lt(t,"fnTableTags");cn(e)||(e="tableTags.json"),e="".concat(lo,"/").concat(e);var n=Ct();function i(t){for(var r=arguments.length,e=new Array(r>1?r-1:0),o=1;o<r;o++)e[o-1]=arguments[o];setTimeout((function(){n.emit.apply(n,[t].concat(e))}),1)}function a(){var t={};try{if(o.default.existsSync(e)){var r=co(o.default.readFileSync(e,"utf8"));uo(r)&&(t=r)}}catch(t){i("error",{msg:"readTableTags catch",err:t})}return t}function u(){try{var t=fo(r);o.default.writeFileSync(e,t,"utf8")}catch(t){i("error",{msg:"writeTableTags catch",err:t})}}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"useInputFirst";r="useStorageFirst"===e?oo(t,a()):"useInputOnly"===e?t:"useStorageOnly"===e?a():oo(a(),t),u()}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r=oo(r,t),u()}function f(){return r}var l=Fn((function(){u(),i("changeTableTags",r)}),200);function v(t){r[t]=ao()+"|"+kn(6),l()}return n.readTableTags=a,n.writeTableTags=u,n.initTableTags=c,n.setTableTags=s,n.getTableTags=f,n.updateTableTag=v,n}function ho(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Ct(),e=Lt(t,"instWConverServer",null);if(null===e)return r.emit("error","invalid opt.instWConverServer"),r;var n=Lt(t,"dbORMs",null);if(!Pt(n))return r.emit("error","invalid opt.dbORMs"),r;var o=Lt(t,"tableNames",null);if(!an(o))return r.emit("error","invalid opt.tableNames"),r;0===Kr(o)&&console.log("opt.tableNames.lenght = 0");var i=Lt(t,"fnTableTags",null);cn(i)||(i="tableTags.json");var a=new vo({fnTableTags:i});o=on(o);var u={};function c(t){var r={};return gr(o,(function(e){var n=e,o=t[e];r[n]=o})),r}return gr(o,(function(t){u[t]=kn(6)})),a.initTableTags(u,"useInputOnly"),gr(o,(function(t){var r=n[t];if(!r)throw new Error("invalid dbORMs.".concat(t));r.on("change",(function(){a.updateTableTag(t)}))})),e.on("clientEnter",(function(t,r){e.deliver(t,{mode:"syncTable",data:a.readTableTags()})})),a.on("changeTableTags",(function(t){e.broadcast({mode:"syncTable",data:c(t)})})),a}function po(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function yo(t){return function(t){if(Array.isArray(t))return po(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(t){if("string"==typeof t)return po(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?po(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bo(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function go(t,r,e,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?r(c):Promise.resolve(c).then(n,o)}function mo(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){go(i,n,o,a,u,"next",t)}function u(t){go(i,n,o,a,u,"throw",t)}a(void 0)}))}}var jo=c((function(t){var r=function(t){var r,e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{s({},"")}catch(t){s=function(t,r,e){return t[r]=e}}function f(t,r,e,n){var o=r&&r.prototype instanceof b?r:b,i=Object.create(o.prototype),a=new A(n||[]);return i._invoke=function(t,r,e){var n=v;return function(o,i){if(n===p)throw new Error("Generator is already running");if(n===y){if("throw"===o)throw i;return k()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var u=$(a,e);if(u){if(u===d)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===v)throw n=y,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=p;var c=l(t,r,e);if("normal"===c.type){if(n=e.done?y:h,c.arg===d)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(n=y,e.method="throw",e.arg=c.arg)}}}(t,e,a),i}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var v="suspendedStart",h="suspendedYield",p="executing",y="completed",d={};function b(){}function g(){}function m(){}var j={};s(j,i,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(D([])));w&&w!==e&&n.call(w,i)&&(j=w);var O=m.prototype=b.prototype=Object.create(j);function S(t){["next","throw","return"].forEach((function(r){s(t,r,(function(t){return this._invoke(r,t)}))}))}function x(t,r){function e(o,i,u,c){var s=l(t[o],t,i);if("throw"!==s.type){var f=s.arg,v=f.value;return v&&"object"===a(v)&&n.call(v,"__await")?r.resolve(v.__await).then((function(t){e("next",t,u,c)}),(function(t){e("throw",t,u,c)})):r.resolve(v).then((function(t){f.value=t,u(f)}),(function(t){return e("throw",t,u,c)}))}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(i,i):i()}}function $(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,$(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function T(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function M(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function D(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:k}}function k(){return{value:r,done:!0}}return g.prototype=m,s(O,"constructor",m),s(m,"constructor",g),g.displayName=s(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===g||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,c,"GeneratorFunction")),t.prototype=Object.create(O),t},t.awrap=function(t){return{__await:t}},S(x.prototype),s(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new x(f(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(O),s(O,c,"Generator"),s(O,i,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(M),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return u.type="throw",u.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),M(e),d}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;M(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:D(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),d}},t}(t.exports);try{regeneratorRuntime=r}catch(t){"object"===("undefined"==typeof globalThis?"undefined":a(globalThis))?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}})),_o=jo;function wo(t){return!!so(t)||(!!function(t){return"[object Null]"===Object.prototype.toString.call(t)}(t)||(!!function(t){if(Pt(t)){for(var r in t)return!1;return!0}return!1}(t)||(!!function(t){return!(!un(t)||""!==t)}(t)||!!function(t){return!!an(t)&&0===t.length}(t))))}function Oo(t){return!!an(t)&&(0!==t.length&&(1!==t.length||!wo(t[0])))}function So(t){var r=Object.prototype.toString.call(t);return"[object Function]"===r||"[object AsyncFunction]"===r}function xo(t){var r,e=Object.prototype.toString.call(t);if(r="[object Promise]"===e)return!0;if("[object Function]"!==e)return!1;try{r="function"!=typeof t.subscribe&&"function"==typeof t.then}catch(t){}return r}function $o(t,r){return!!Pt(t)&&(!(!cn(r)&&!wn(r))&&r in t)}function To(t){if(!cn(t)&&!wn(t)&&!O(t))return"";var r="";try{r=String(t)}catch(t){}try{r=t.toString()}catch(t){}return r}function Mo(){var t,r,e=new Promise((function(){t=arguments[0],r=arguments[1]}));return e.resolve=t,e.reject=r,e}function Ao(t){return function(){var r=Mo(),e=null,n=null;try{e=t.apply(this,arguments)}catch(t){n=t}return null!==n?r.resolve({state:"error",msg:n}):xo(e)?e.then((function(t){r.resolve({state:"success",msg:t})})).catch((function(t){"cancelled"===Lt(t,"reason")?r.resolve({state:"cancelled",msg:""}):r.resolve({state:"error",msg:t})})):r.resolve({state:"success",msg:e}),r}}function Do(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function ko(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?Do(Object(e),!0).forEach((function(r){bo(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Do(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}var Eo={},Lo=null;function Po(t,r,e){var n={};return gr(t,(function(t){gr(r,(function(r){var o="".concat(t,".").concat(r);n[o]=function(){var n=mo(_o.mark((function n(o,i){var a;return _o.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e(o,t,r,i);case 2:return a=n.sent,n.abrupt("return",a);case 4:case"end":return n.stop()}}),n)})));return function(t,r){return n.apply(this,arguments)}}()}))})),n}function Fo(t){return No.apply(this,arguments)}function No(){return(No=mo(_o.mark((function t(r){var e,n,o,i,a,u,c,s,f;return _o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.func,n=r.input,o=r.pm,i="",$o(n,"__sysToken__")){t.next=5;break}return o.resolve({state:"error",msg:"invalid token"}),t.abrupt("return",o);case 5:if(i=To(n.__sysToken__),$o(n,"__sysInputArgs__")){t.next=9;break}return o.resolve({state:"error",msg:"invalid input"}),t.abrupt("return",o);case 9:if(n=n.__sysInputArgs__,a="",!xo(u=Lo(i))){t.next=18;break}return t.next=15,u;case 15:a=t.sent,t.next=19;break;case 18:a=u;case 19:if(cn(a)||(a=""),"getFuncList"!==e){t.next=24;break}return c={state:"success",msg:pr(Eo)},o.resolve(c),t.abrupt("return",o);case 24:if($o(Eo,e)){t.next=27;break}return o.resolve({state:"error",msg:"invalid func[".concat(e,"]")}),t.abrupt("return",o);case 27:return s=Eo[e],t.prev=28,t.next=31,Ao(s).apply(void 0,[a].concat(yo(n)));case 31:f=t.sent,o.resolve(f),t.next=38;break;case 35:t.prev=35,t.t0=t.catch(28),o.resolve({state:"error",msg:"無法識別func: ".concat(e)});case 38:return t.abrupt("return",o);case 39:case"end":return t.stop()}}),t,null,[[28,35]])})))).apply(this,arguments)}function Io(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Ct(),e=Lt(t,"instWConverServer",null);if(null===e)return r.emit("error","invalid opt.instWConverServer"),r;So(Lo=Lt(t,"cbGetUserIDFromToken",null))||(Lo=function(){var t=mo(_o.mark((function t(){return _o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return","");case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());var n=Lt(t,"useDbORM",null);Nt(n)||(n=!0);var o=null;if(n&&!So(o=Lt(t,"operORM",null)))return r.emit("error","invalid opt.operORM when useDbORM=true"),r;var i=[];if(n&&!an(i=Lt(t,"tableNames",null)))return r.emit("error","invalid opt.tableNames when useDbORM=true"),r;var a=[];n&&(an(a=Lt(t,"methods",null))||(a=["select","insert","save","del"]));var u=Lt(t,"extFuncs",null),c=Lt(t,"hookBefores",null),s=Lt(t,"hookAfters",null),f={};return n&&(i=on(i),f=Po(i,a,o)),Pt(u)&&gr(u,(function(t,r){f[r]=t})),Eo=f,e.on("execute",function(){var t=mo(_o.mark((function t(e,n,o){var i,a,u;return _o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i={func:e,input:n,pm:o},So(c))try{c(i)}catch(t){r.emit("error",t)}else Oo(c)&&gr(c,(function(t){if(So(t))try{t(i)}catch(t){r.emit("error",t)}}));return t.next=4,Fo(i).catch((function(t){r.emit("error",t)}));case 4:if(a=t.sent,u=ko(ko({},i),{},{output:a}),So(s))try{s(u)}catch(t){r.emit("error",t)}else Oo(s)&&gr(s,(function(t){if(So(t))try{t(u)}catch(t){r.emit("error",t)}}));case 7:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}()),r}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Ct(),e=Lt(t,"instWConverServer",null);if(null===e)return r.emit("error","invalid opt.instWConverServer"),r;var n=Lt(t,"useDbORM",null);Nt(n)||(n=!0);var o=Lt(t,"dbORMs",null),i=Lt(t,"operORM",null),a=Lt(t,"tableNamesExec",null),u=Lt(t,"methodsExec",null),c=Lt(t,"tableNamesSync",null),s=Lt(t,"cbGetUserIDFromToken",null),f=Lt(t,"extFuncs",null),l=Lt(t,"hookBefores",null),v=Lt(t,"hookAfters",null),h=Lt(t,"fnTableTags",null),p=Io({instWConverServer:e,cbGetUserIDFromToken:s,useDbORM:n,operORM:i,tableNames:a,methods:u,extFuncs:f,hookBefores:l,hookAfters:v});if(p.on("error",(function(t){r.emit("error",t)})),n){if(!Pt(o))return r.emit("error","invalid opt.dbORMs when useDbORM=true"),r;var y=ho({instWConverServer:e,dbORMs:o,tableNames:c,fnTableTags:h});y.on("error",(function(t){r.emit("error",t)}))}return r}}));
//# sourceMappingURL=w-serv-webdata-server.umd.js.map
