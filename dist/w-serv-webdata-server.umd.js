/*!
 * w-serv-webdata-server v1.0.23
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("path"),require("fs"),require("events")):"function"==typeof define&&define.amd?define(["path","fs","events"],r):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-serv-webdata-server"]=r(t.path,t.fs,t.events)}(this,(function(t,r,e){"use strict";function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=n(t),i=n(r),u=n(e),a=Array.isArray;function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function f(t){var r={exports:{}};return t(r,r.exports),r.exports}var l="object"==c(s)&&s&&s.Object===Object&&s,v="object"==("undefined"==typeof self?"undefined":c(self))&&self&&self.Object===Object&&self,h=l||v||Function("return this")(),p=h.Symbol,y=Object.prototype,d=y.hasOwnProperty,b=y.toString,g=p?p.toStringTag:void 0;var m=function(t){var r=d.call(t,g),e=t[g];try{t[g]=void 0;var n=!0}catch(t){}var o=b.call(t);return n&&(r?t[g]=e:delete t[g]),o},j=Object.prototype.toString;var _=function(t){return j.call(t)},w=p?p.toStringTag:void 0;var O=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":w&&w in Object(t)?m(t):_(t)};var S=function(t){return null!=t&&"object"==c(t)};var x=function(t){return"symbol"==c(t)||S(t)&&"[object Symbol]"==O(t)},$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,T=/^\w*$/;var M=function(t,r){if(a(t))return!1;var e=c(t);return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!x(t))||(T.test(t)||!$.test(t)||null!=r&&t in Object(r))};var A=function(t){var r=c(t);return null!=t&&("object"==r||"function"==r)};var D,E=function(t){if(!A(t))return!1;var r=O(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r},k=h["__core-js_shared__"],L=(D=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||""))?"Symbol(src)_1."+D:"";var P=function(t){return!!L&&L in t},F=Function.prototype.toString;var N=function(t){if(null!=t){try{return F.call(t)}catch(t){}try{return t+""}catch(t){}}return""},I=/^\[object .+?Constructor\]$/,C=Function.prototype,R=Object.prototype,z=C.toString,U=R.hasOwnProperty,W=RegExp("^"+z.call(U).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Y=function(t){return!(!A(t)||P(t))&&(E(t)?W:I).test(N(t))};var B=function(t,r){return null==t?void 0:t[r]};var H=function(t,r){var e=B(t,r);return Y(e)?e:void 0},G=H(Object,"create");var V=function(){this.__data__=G?G(null):{},this.size=0};var J=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},q=Object.prototype.hasOwnProperty;var Z=function(t){var r=this.__data__;if(G){var e=r[t];return"__lodash_hash_undefined__"===e?void 0:e}return q.call(r,t)?r[t]:void 0},Q=Object.prototype.hasOwnProperty;var K=function(t){var r=this.__data__;return G?void 0!==r[t]:Q.call(r,t)};var X=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=G&&void 0===r?"__lodash_hash_undefined__":r,this};function tt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}tt.prototype.clear=V,tt.prototype.delete=J,tt.prototype.get=Z,tt.prototype.has=K,tt.prototype.set=X;var rt=tt;var et=function(){this.__data__=[],this.size=0};var nt=function(t,r){return t===r||t!=t&&r!=r};var ot=function(t,r){for(var e=t.length;e--;)if(nt(t[e][0],r))return e;return-1},it=Array.prototype.splice;var ut=function(t){var r=this.__data__,e=ot(r,t);return!(e<0)&&(e==r.length-1?r.pop():it.call(r,e,1),--this.size,!0)};var at=function(t){var r=this.__data__,e=ot(r,t);return e<0?void 0:r[e][1]};var ct=function(t){return ot(this.__data__,t)>-1};var st=function(t,r){var e=this.__data__,n=ot(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};function ft(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}ft.prototype.clear=et,ft.prototype.delete=ut,ft.prototype.get=at,ft.prototype.has=ct,ft.prototype.set=st;var lt=ft,vt=H(h,"Map");var ht=function(){this.size=0,this.__data__={hash:new rt,map:new(vt||lt),string:new rt}};var pt=function(t){var r=c(t);return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t};var yt=function(t,r){var e=t.__data__;return pt(r)?e["string"==typeof r?"string":"hash"]:e.map};var dt=function(t){var r=yt(this,t).delete(t);return this.size-=r?1:0,r};var bt=function(t){return yt(this,t).get(t)};var gt=function(t){return yt(this,t).has(t)};var mt=function(t,r){var e=yt(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this};function jt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}jt.prototype.clear=ht,jt.prototype.delete=dt,jt.prototype.get=bt,jt.prototype.has=gt,jt.prototype.set=mt;var _t=jt;function wt(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError("Expected a function");var e=function e(){var n=arguments,o=r?r.apply(this,n):n[0],i=e.cache;if(i.has(o))return i.get(o);var u=t.apply(this,n);return e.cache=i.set(o,u)||i,u};return e.cache=new(wt.Cache||_t),e}wt.Cache=_t;var Ot=wt;var St=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xt=/\\(\\)?/g,$t=function(t){var r=Ot(t,(function(t){return 500===e.size&&e.clear(),t})),e=r.cache;return r}((function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(St,(function(t,e,n,o){r.push(n?o.replace(xt,"$1"):e||t)})),r}));var Tt=function(t,r){for(var e=-1,n=null==t?0:t.length,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o},Mt=p?p.prototype:void 0,At=Mt?Mt.toString:void 0;var Dt=function t(r){if("string"==typeof r)return r;if(a(r))return Tt(r,t)+"";if(x(r))return At?At.call(r):"";var e=r+"";return"0"==e&&1/r==-Infinity?"-0":e};var Et=function(t){return null==t?"":Dt(t)};var kt=function(t,r){return a(t)?t:M(t,r)?[t]:$t(Et(t))};var Lt=function(t){if("string"==typeof t||x(t))return t;var r=t+"";return"0"==r&&1/t==-Infinity?"-0":r};var Pt=function(t,r){for(var e=0,n=(r=kt(r,t)).length;null!=t&&e<n;)t=t[Lt(r[e++])];return e&&e==n?t:void 0};var Ft=function(t,r,e){var n=null==t?void 0:Pt(t,r);return void 0===n?e:n};function Nt(t){return"[object Object]"===Object.prototype.toString.call(t)}var It=function(t){return!0===t||!1===t||S(t)&&"[object Boolean]"==O(t)};function Ct(t){return It(t)}var Rt=f((function(t){var r=Object.prototype.hasOwnProperty,e="~";function n(){}function o(t,r,e){this.fn=t,this.context=r,this.once=e||!1}function i(t,r,n,i,u){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new o(n,i||t,u),c=e?e+r:r;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function u(t,r){0==--t._eventsCount?t._events=new n:delete t._events[r]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(e=!1)),a.prototype.eventNames=function(){var t,n,o=[];if(0===this._eventsCount)return o;for(n in t=this._events)r.call(t,n)&&o.push(e?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},a.prototype.listeners=function(t){var r=e?e+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,u=new Array(i);o<i;o++)u[o]=n[o].fn;return u},a.prototype.listenerCount=function(t){var r=e?e+t:t,n=this._events[r];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,r,n,o,i,u){var a=e?e+t:t;if(!this._events[a])return!1;var c,s,f=this._events[a],l=arguments.length;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),l){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,r),!0;case 3:return f.fn.call(f.context,r,n),!0;case 4:return f.fn.call(f.context,r,n,o),!0;case 5:return f.fn.call(f.context,r,n,o,i),!0;case 6:return f.fn.call(f.context,r,n,o,i,u),!0}for(s=1,c=new Array(l-1);s<l;s++)c[s-1]=arguments[s];f.fn.apply(f.context,c)}else{var v,h=f.length;for(s=0;s<h;s++)switch(f[s].once&&this.removeListener(t,f[s].fn,void 0,!0),l){case 1:f[s].fn.call(f[s].context);break;case 2:f[s].fn.call(f[s].context,r);break;case 3:f[s].fn.call(f[s].context,r,n);break;case 4:f[s].fn.call(f[s].context,r,n,o);break;default:if(!c)for(v=1,c=new Array(l-1);v<l;v++)c[v-1]=arguments[v];f[s].fn.apply(f[s].context,c)}}return!0},a.prototype.on=function(t,r,e){return i(this,t,r,e,!1)},a.prototype.once=function(t,r,e){return i(this,t,r,e,!0)},a.prototype.removeListener=function(t,r,n,o){var i=e?e+t:t;if(!this._events[i])return this;if(!r)return u(this,i),this;var a=this._events[i];if(a.fn)a.fn!==r||o&&!a.once||n&&a.context!==n||u(this,i);else{for(var c=0,s=[],f=a.length;c<f;c++)(a[c].fn!==r||o&&!a[c].once||n&&a[c].context!==n)&&s.push(a[c]);s.length?this._events[i]=1===s.length?s[0]:s:u(this,i)}return this},a.prototype.removeAllListeners=function(t){var r;return t?(r=e?e+t:t,this._events[r]&&u(this,r)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,t.exports=a}));function zt(){return new Rt}var Ut=function(t,r){for(var e=-1,n=null==t?0:t.length;++e<n&&!1!==r(t[e],e,t););return t};var Wt=function(t){return function(r,e,n){for(var o=-1,i=Object(r),u=n(r),a=u.length;a--;){var c=u[t?a:++o];if(!1===e(i[c],c,i))break}return r}}();var Yt=function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n};var Bt=function(t){return S(t)&&"[object Arguments]"==O(t)},Ht=Object.prototype,Gt=Ht.hasOwnProperty,Vt=Ht.propertyIsEnumerable,Jt=Bt(function(){return arguments}())?Bt:function(t){return S(t)&&Gt.call(t,"callee")&&!Vt.call(t,"callee")},qt=Jt;var Zt=function(){return!1},Qt=f((function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e?h.Buffer:void 0,i=(o?o.isBuffer:void 0)||Zt;t.exports=i})),Kt=/^(?:0|[1-9]\d*)$/;var Xt=function(t,r){var e=c(t);return!!(r=null==r?9007199254740991:r)&&("number"==e||"symbol"!=e&&Kt.test(t))&&t>-1&&t%1==0&&t<r};var tr=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},rr={};rr["[object Float32Array]"]=rr["[object Float64Array]"]=rr["[object Int8Array]"]=rr["[object Int16Array]"]=rr["[object Int32Array]"]=rr["[object Uint8Array]"]=rr["[object Uint8ClampedArray]"]=rr["[object Uint16Array]"]=rr["[object Uint32Array]"]=!0,rr["[object Arguments]"]=rr["[object Array]"]=rr["[object ArrayBuffer]"]=rr["[object Boolean]"]=rr["[object DataView]"]=rr["[object Date]"]=rr["[object Error]"]=rr["[object Function]"]=rr["[object Map]"]=rr["[object Number]"]=rr["[object Object]"]=rr["[object RegExp]"]=rr["[object Set]"]=rr["[object String]"]=rr["[object WeakMap]"]=!1;var er=function(t){return S(t)&&tr(t.length)&&!!rr[O(t)]};var nr=function(t){return function(r){return t(r)}},or=f((function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e&&l.process,i=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i})),ir=or&&or.isTypedArray,ur=ir?nr(ir):er,ar=Object.prototype.hasOwnProperty;var cr=function(t,r){var e=a(t),n=!e&&qt(t),o=!e&&!n&&Qt(t),i=!e&&!n&&!o&&ur(t),u=e||n||o||i,c=u?Yt(t.length,String):[],s=c.length;for(var f in t)!r&&!ar.call(t,f)||u&&("length"==f||o&&("offset"==f||"parent"==f)||i&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||Xt(f,s))||c.push(f);return c},sr=Object.prototype;var fr=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||sr)};var lr=function(t,r){return function(e){return t(r(e))}},vr=lr(Object.keys,Object),hr=Object.prototype.hasOwnProperty;var pr=function(t){if(!fr(t))return vr(t);var r=[];for(var e in Object(t))hr.call(t,e)&&"constructor"!=e&&r.push(e);return r};var yr=function(t){return null!=t&&tr(t.length)&&!E(t)};var dr=function(t){return yr(t)?cr(t):pr(t)};var br=function(t,r){return function(e,n){if(null==e)return e;if(!yr(e))return t(e,n);for(var o=e.length,i=r?o:-1,u=Object(e);(r?i--:++i<o)&&!1!==n(u[i],i,u););return e}}((function(t,r){return t&&Wt(t,r,dr)}));var gr=function(t){return t};var mr=function(t){return"function"==typeof t?t:gr};var jr=function(t,r){return(a(t)?Ut:br)(t,mr(r))},_r=H(h,"DataView"),wr=H(h,"Promise"),Or=H(h,"Set"),Sr=H(h,"WeakMap"),xr="[object Map]",$r="[object Promise]",Tr="[object Set]",Mr="[object WeakMap]",Ar="[object DataView]",Dr=N(_r),Er=N(vt),kr=N(wr),Lr=N(Or),Pr=N(Sr),Fr=O;(_r&&Fr(new _r(new ArrayBuffer(1)))!=Ar||vt&&Fr(new vt)!=xr||wr&&Fr(wr.resolve())!=$r||Or&&Fr(new Or)!=Tr||Sr&&Fr(new Sr)!=Mr)&&(Fr=function(t){var r=O(t),e="[object Object]"==r?t.constructor:void 0,n=e?N(e):"";if(n)switch(n){case Dr:return Ar;case Er:return xr;case kr:return $r;case Lr:return Tr;case Pr:return Mr}return r});var Nr=Fr;var Ir=function(t){return"string"==typeof t||!a(t)&&S(t)&&"[object String]"==O(t)};var Cr=function(t){return function(r){return null==r?void 0:r[t]}}("length"),Rr=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var zr=function(t){return Rr.test(t)},Ur="[\\ud800-\\udfff]",Wr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Yr="\\ud83c[\\udffb-\\udfff]",Br="[^\\ud800-\\udfff]",Hr="(?:\\ud83c[\\udde6-\\uddff]){2}",Gr="[\\ud800-\\udbff][\\udc00-\\udfff]",Vr="(?:"+Wr+"|"+Yr+")"+"?",Jr="[\\ufe0e\\ufe0f]?",qr=Jr+Vr+("(?:\\u200d(?:"+[Br,Hr,Gr].join("|")+")"+Jr+Vr+")*"),Zr="(?:"+[Br+Wr+"?",Wr,Hr,Gr,Ur].join("|")+")",Qr=RegExp(Yr+"(?="+Yr+")|"+Zr+qr,"g");var Kr=function(t){for(var r=Qr.lastIndex=0;Qr.test(t);)++r;return r};var Xr=function(t){return zr(t)?Kr(t):Cr(t)};var te=function(t){if(null==t)return 0;if(yr(t))return Ir(t)?Xr(t):t.length;var r=Nr(t);return"[object Map]"==r||"[object Set]"==r?t.size:pr(t).length};var re=function(){this.__data__=new lt,this.size=0};var ee=function(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e};var ne=function(t){return this.__data__.get(t)};var oe=function(t){return this.__data__.has(t)};var ie=function(t,r){var e=this.__data__;if(e instanceof lt){var n=e.__data__;if(!vt||n.length<199)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new _t(n)}return e.set(t,r),this.size=e.size,this};function ue(t){var r=this.__data__=new lt(t);this.size=r.size}ue.prototype.clear=re,ue.prototype.delete=ee,ue.prototype.get=ne,ue.prototype.has=oe,ue.prototype.set=ie;var ae=ue,ce=function(){try{var t=H(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var se=function(t,r,e){"__proto__"==r&&ce?ce(t,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[r]=e},fe=Object.prototype.hasOwnProperty;var le=function(t,r,e){var n=t[r];fe.call(t,r)&&nt(n,e)&&(void 0!==e||r in t)||se(t,r,e)};var ve=function(t,r,e,n){var o=!e;e||(e={});for(var i=-1,u=r.length;++i<u;){var a=r[i],c=n?n(e[a],t[a],a,e,t):void 0;void 0===c&&(c=t[a]),o?se(e,a,c):le(e,a,c)}return e};var he=function(t,r){return t&&ve(r,dr(r),t)};var pe=function(t){var r=[];if(null!=t)for(var e in Object(t))r.push(e);return r},ye=Object.prototype.hasOwnProperty;var de=function(t){if(!A(t))return pe(t);var r=fr(t),e=[];for(var n in t)("constructor"!=n||!r&&ye.call(t,n))&&e.push(n);return e};var be=function(t){return yr(t)?cr(t,!0):de(t)};var ge=function(t,r){return t&&ve(r,be(r),t)},me=f((function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e?h.Buffer:void 0,i=o?o.allocUnsafe:void 0;t.exports=function(t,r){if(r)return t.slice();var e=t.length,n=i?i(e):new t.constructor(e);return t.copy(n),n}}));var je=function(t,r){var e=-1,n=t.length;for(r||(r=Array(n));++e<n;)r[e]=t[e];return r};var _e=function(t,r){for(var e=-1,n=null==t?0:t.length,o=0,i=[];++e<n;){var u=t[e];r(u,e,t)&&(i[o++]=u)}return i};var we=function(){return[]},Oe=Object.prototype.propertyIsEnumerable,Se=Object.getOwnPropertySymbols,xe=Se?function(t){return null==t?[]:(t=Object(t),_e(Se(t),(function(r){return Oe.call(t,r)})))}:we;var $e=function(t,r){return ve(t,xe(t),r)};var Te=function(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t},Me=lr(Object.getPrototypeOf,Object),Ae=Object.getOwnPropertySymbols?function(t){for(var r=[];t;)Te(r,xe(t)),t=Me(t);return r}:we;var De=function(t,r){return ve(t,Ae(t),r)};var Ee=function(t,r,e){var n=r(t);return a(t)?n:Te(n,e(t))};var ke=function(t){return Ee(t,dr,xe)};var Le=function(t){return Ee(t,be,Ae)},Pe=Object.prototype.hasOwnProperty;var Fe=function(t){var r=t.length,e=new t.constructor(r);return r&&"string"==typeof t[0]&&Pe.call(t,"index")&&(e.index=t.index,e.input=t.input),e},Ne=h.Uint8Array;var Ie=function(t){var r=new t.constructor(t.byteLength);return new Ne(r).set(new Ne(t)),r};var Ce=function(t,r){var e=r?Ie(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)},Re=/\w*$/;var ze=function(t){var r=new t.constructor(t.source,Re.exec(t));return r.lastIndex=t.lastIndex,r},Ue=p?p.prototype:void 0,We=Ue?Ue.valueOf:void 0;var Ye=function(t){return We?Object(We.call(t)):{}};var Be=function(t,r){var e=r?Ie(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)};var He=function(t,r,e){var n=t.constructor;switch(r){case"[object ArrayBuffer]":return Ie(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return Ce(t,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Be(t,e);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return ze(t);case"[object Symbol]":return Ye(t)}},Ge=Object.create,Ve=function(){function t(){}return function(r){if(!A(r))return{};if(Ge)return Ge(r);t.prototype=r;var e=new t;return t.prototype=void 0,e}}();var Je=function(t){return"function"!=typeof t.constructor||fr(t)?{}:Ve(Me(t))};var qe=function(t){return S(t)&&"[object Map]"==Nr(t)},Ze=or&&or.isMap,Qe=Ze?nr(Ze):qe;var Ke=function(t){return S(t)&&"[object Set]"==Nr(t)},Xe=or&&or.isSet,tn=Xe?nr(Xe):Ke,rn="[object Arguments]",en="[object Function]",nn="[object Object]",on={};on[rn]=on["[object Array]"]=on["[object ArrayBuffer]"]=on["[object DataView]"]=on["[object Boolean]"]=on["[object Date]"]=on["[object Float32Array]"]=on["[object Float64Array]"]=on["[object Int8Array]"]=on["[object Int16Array]"]=on["[object Int32Array]"]=on["[object Map]"]=on["[object Number]"]=on[nn]=on["[object RegExp]"]=on["[object Set]"]=on["[object String]"]=on["[object Symbol]"]=on["[object Uint8Array]"]=on["[object Uint8ClampedArray]"]=on["[object Uint16Array]"]=on["[object Uint32Array]"]=!0,on["[object Error]"]=on[en]=on["[object WeakMap]"]=!1;var un=function t(r,e,n,o,i,u){var c,s=1&e,f=2&e,l=4&e;if(n&&(c=i?n(r,o,i,u):n(r)),void 0!==c)return c;if(!A(r))return r;var v=a(r);if(v){if(c=Fe(r),!s)return je(r,c)}else{var h=Nr(r),p=h==en||"[object GeneratorFunction]"==h;if(Qt(r))return me(r,s);if(h==nn||h==rn||p&&!i){if(c=f||p?{}:Je(r),!s)return f?De(r,ge(c,r)):$e(r,he(c,r))}else{if(!on[h])return i?r:{};c=He(r,h,s)}}u||(u=new ae);var y=u.get(r);if(y)return y;u.set(r,c),tn(r)?r.forEach((function(o){c.add(t(o,e,n,o,r,u))})):Qe(r)&&r.forEach((function(o,i){c.set(i,t(o,e,n,i,r,u))}));var d=v?void 0:(l?f?Le:ke:f?be:dr)(r);return Ut(d||r,(function(o,i){d&&(o=r[i=o]),le(c,i,t(o,e,n,i,r,u))})),c};var an=function(t){return un(t,5)};function cn(t){return"[object Array]"===Object.prototype.toString.call(t)}var sn=/\s/;var fn=function(t){for(var r=t.length;r--&&sn.test(t.charAt(r)););return r},ln=/^\s+/;var vn=function(t){return t?t.slice(0,fn(t)+1).replace(ln,""):t},hn=/^[-+]0x[0-9a-f]+$/i,pn=/^0b[01]+$/i,yn=/^0o[0-7]+$/i,dn=parseInt;var bn=function(t){if("number"==typeof t)return t;if(x(t))return NaN;if(A(t)){var r="function"==typeof t.valueOf?t.valueOf():t;t=A(r)?r+"":r}if("string"!=typeof t)return 0===t?t:+t;t=vn(t);var e=pn.test(t);return e||yn.test(t)?dn(t.slice(2),e?2:8):hn.test(t)?NaN:+t},gn=1/0;var mn=function(t){return t?(t=bn(t))===gn||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var jn=function(t){var r=mn(t),e=r%1;return r==r?e?r-e:r:0};var _n=function(t){return"number"==typeof t&&t==jn(t)};function wn(t){return"[object String]"===Object.prototype.toString.call(t)}function On(t){return!(!wn(t)||""===t)}function Sn(t){var r=!1;return On(t)?r=!isNaN(Number(t)):function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)&&(r=!0),r}function xn(t){return Sn(t)?mn(t):0}var $n=h.isFinite,Tn=Math.min;var Mn=function(t){var r=Math[t];return function(t,e){if(t=bn(t),(e=null==e?0:Tn(jn(e),292))&&$n(t)){var n=(Et(t)+"e").split("e"),o=r(n[0]+"e"+(+n[1]+e));return+((n=(Et(o)+"e").split("e"))[0]+"e"+(+n[1]-e))}return r(t)}}("round");function An(t){if(!Sn(t))return 0;t=xn(t);var r=Mn(t);return"0"===String(r)?0:r}function Dn(t){return!!function(t){return!!Sn(t)&&(t=xn(t),_n(t))}(t)&&An(t)>0}var En="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),kn=En.length;function Ln(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,r=[];t=Dn(t)?An(t):32;for(var e=0;e<t;e++)r[e]=En[0|Math.random()*kn];var n=r.join("");return n}var Pn=function(){return h.Date.now()},Fn=Math.max,Nn=Math.min;var In=function(t,r,e){var n,o,i,u,a,c,s=0,f=!1,l=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(r){var e=n,i=o;return n=o=void 0,s=r,u=t.apply(i,e)}function p(t){return s=t,a=setTimeout(d,r),f?h(t):u}function y(t){var e=t-c;return void 0===c||e>=r||e<0||l&&t-s>=i}function d(){var t=Pn();if(y(t))return b(t);a=setTimeout(d,function(t){var e=r-(t-c);return l?Nn(e,i-(t-s)):e}(t))}function b(t){return a=void 0,v&&n?h(t):(n=o=void 0,u)}function g(){var t=Pn(),e=y(t);if(n=arguments,o=this,c=t,e){if(void 0===a)return p(c);if(l)return clearTimeout(a),a=setTimeout(d,r),h(c)}return void 0===a&&(a=setTimeout(d,r)),u}return r=bn(r)||0,A(e)&&(f=!!e.leading,i=(l="maxWait"in e)?Fn(bn(e.maxWait)||0,r):i,v="trailing"in e?!!e.trailing:v),g.cancel=function(){void 0!==a&&clearTimeout(a),s=0,n=c=o=a=void 0},g.flush=function(){return void 0===a?u:b(Pn())},g};var Cn=function(t,r,e){(void 0!==e&&!nt(t[r],e)||void 0===e&&!(r in t))&&se(t,r,e)};var Rn=function(t){return S(t)&&yr(t)},zn=Function.prototype,Un=Object.prototype,Wn=zn.toString,Yn=Un.hasOwnProperty,Bn=Wn.call(Object);var Hn=function(t){if(!S(t)||"[object Object]"!=O(t))return!1;var r=Me(t);if(null===r)return!0;var e=Yn.call(r,"constructor")&&r.constructor;return"function"==typeof e&&e instanceof e&&Wn.call(e)==Bn};var Gn=function(t,r){if(("constructor"!==r||"function"!=typeof t[r])&&"__proto__"!=r)return t[r]};var Vn=function(t){return ve(t,be(t))};var Jn=function(t,r,e,n,o,i,u){var c=Gn(t,e),s=Gn(r,e),f=u.get(s);if(f)Cn(t,e,f);else{var l=i?i(c,s,e+"",t,r,u):void 0,v=void 0===l;if(v){var h=a(s),p=!h&&Qt(s),y=!h&&!p&&ur(s);l=s,h||p||y?a(c)?l=c:Rn(c)?l=je(c):p?(v=!1,l=me(s,!0)):y?(v=!1,l=Be(s,!0)):l=[]:Hn(s)||qt(s)?(l=c,qt(c)?l=Vn(c):A(c)&&!E(c)||(l=Je(s))):v=!1}v&&(u.set(s,l),o(l,s,n,i,u),u.delete(s)),Cn(t,e,l)}};var qn=function t(r,e,n,o,i){r!==e&&Wt(e,(function(u,a){if(i||(i=new ae),A(u))Jn(r,e,a,n,t,o,i);else{var c=o?o(Gn(r,a),u,a+"",r,e,i):void 0;void 0===c&&(c=u),Cn(r,a,c)}}),be)};var Zn=function(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)},Qn=Math.max;var Kn=function(t,r,e){return r=Qn(void 0===r?t.length-1:r,0),function(){for(var n=arguments,o=-1,i=Qn(n.length-r,0),u=Array(i);++o<i;)u[o]=n[r+o];o=-1;for(var a=Array(r+1);++o<r;)a[o]=n[o];return a[r]=e(u),Zn(t,this,a)}};var Xn=function(t){return function(){return t}},to=ce?function(t,r){return ce(t,"toString",{configurable:!0,enumerable:!1,value:Xn(r),writable:!0})}:gr,ro=Date.now;var eo=function(t){var r=0,e=0;return function(){var n=ro(),o=16-(n-e);if(e=n,o>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}},no=eo(to);var oo=function(t,r){return no(Kn(t,r,gr),t+"")};var io=function(t,r,e){if(!A(e))return!1;var n=c(r);return!!("number"==n?yr(e)&&Xt(r,e.length):"string"==n&&r in e)&&nt(e[r],t)};var uo=function(t){return oo((function(r,e){var n=-1,o=e.length,i=o>1?e[o-1]:void 0,u=o>2?e[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,u&&io(e[0],e[1],u)&&(i=o<3?void 0:i,o=1),r=Object(r);++n<o;){var a=e[n];a&&t(r,a,n,i)}return r}))}((function(t,r,e){qn(t,r,e)})),ao=f((function(t,r){t.exports=function(){var t=1e3,r=6e4,e=36e5,n="millisecond",o="second",i="minute",u="hour",a="day",s="week",f="month",l="quarter",v="year",h="date",p="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},g=function(t,r,e){var n=String(t);return!n||n.length>=r?t:""+Array(r+1-n.length).join(e)+t},m={s:g,z:function(t){var r=-t.utcOffset(),e=Math.abs(r),n=Math.floor(e/60),o=e%60;return(r<=0?"+":"-")+g(n,2,"0")+":"+g(o,2,"0")},m:function t(r,e){if(r.date()<e.date())return-t(e,r);var n=12*(e.year()-r.year())+(e.month()-r.month()),o=r.clone().add(n,f),i=e-o<0,u=r.clone().add(n+(i?-1:1),f);return+(-(n+(e-o)/(i?o-u:u-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:f,y:v,w:s,d:a,D:h,h:u,m:i,s:o,ms:n,Q:l}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},j="en",_={};_[j]=b;var w=function(t){return t instanceof $},O=function t(r,e,n){var o;if(!r)return j;if("string"==typeof r){var i=r.toLowerCase();_[i]&&(o=i),e&&(_[i]=e,o=i);var u=r.split("-");if(!o&&u.length>1)return t(u[0])}else{var a=r.name;_[a]=r,o=a}return!n&&o&&(j=o),o||!n&&j},S=function(t,r){if(w(t))return t.clone();var e="object"==c(r)?r:{};return e.date=t,e.args=arguments,new $(e)},x=m;x.l=O,x.i=w,x.w=function(t,r){return S(t,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var $=function(){function c(t){this.$L=O(t.locale,null,!0),this.parse(t)}var b=c.prototype;return b.parse=function(t){this.$d=function(t){var r=t.date,e=t.utc;if(null===r)return new Date(NaN);if(x.u(r))return new Date;if(r instanceof Date)return new Date(r);if("string"==typeof r&&!/Z$/i.test(r)){var n=r.match(y);if(n){var o=n[2]-1||0,i=(n[7]||"0").substring(0,3);return e?new Date(Date.UTC(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(r)}(t),this.$x=t.x||{},this.init()},b.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},b.$utils=function(){return x},b.isValid=function(){return!(this.$d.toString()===p)},b.isSame=function(t,r){var e=S(t);return this.startOf(r)<=e&&e<=this.endOf(r)},b.isAfter=function(t,r){return S(t)<this.startOf(r)},b.isBefore=function(t,r){return this.endOf(r)<S(t)},b.$g=function(t,r,e){return x.u(t)?this[r]:this.set(e,t)},b.unix=function(){return Math.floor(this.valueOf()/1e3)},b.valueOf=function(){return this.$d.getTime()},b.startOf=function(t,r){var e=this,n=!!x.u(r)||r,c=x.p(t),l=function(t,r){var o=x.w(e.$u?Date.UTC(e.$y,r,t):new Date(e.$y,r,t),e);return n?o:o.endOf(a)},p=function(t,r){return x.w(e.toDate()[t].apply(e.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(r)),e)},y=this.$W,d=this.$M,b=this.$D,g="set"+(this.$u?"UTC":"");switch(c){case v:return n?l(1,0):l(31,11);case f:return n?l(1,d):l(0,d+1);case s:var m=this.$locale().weekStart||0,j=(y<m?y+7:y)-m;return l(n?b-j:b+(6-j),d);case a:case h:return p(g+"Hours",0);case u:return p(g+"Minutes",1);case i:return p(g+"Seconds",2);case o:return p(g+"Milliseconds",3);default:return this.clone()}},b.endOf=function(t){return this.startOf(t,!1)},b.$set=function(t,r){var e,c=x.p(t),s="set"+(this.$u?"UTC":""),l=(e={},e[a]=s+"Date",e[h]=s+"Date",e[f]=s+"Month",e[v]=s+"FullYear",e[u]=s+"Hours",e[i]=s+"Minutes",e[o]=s+"Seconds",e[n]=s+"Milliseconds",e)[c],p=c===a?this.$D+(r-this.$W):r;if(c===f||c===v){var y=this.clone().set(h,1);y.$d[l](p),y.init(),this.$d=y.set(h,Math.min(this.$D,y.daysInMonth())).$d}else l&&this.$d[l](p);return this.init(),this},b.set=function(t,r){return this.clone().$set(t,r)},b.get=function(t){return this[x.p(t)]()},b.add=function(n,c){var l,h=this;n=Number(n);var p=x.p(c),y=function(t){var r=S(h);return x.w(r.date(r.date()+Math.round(t*n)),h)};if(p===f)return this.set(f,this.$M+n);if(p===v)return this.set(v,this.$y+n);if(p===a)return y(1);if(p===s)return y(7);var d=(l={},l[i]=r,l[u]=e,l[o]=t,l)[p]||1,b=this.$d.getTime()+n*d;return x.w(b,this)},b.subtract=function(t,r){return this.add(-1*t,r)},b.format=function(t){var r=this,e=this.$locale();if(!this.isValid())return e.invalidDate||p;var n=t||"YYYY-MM-DDTHH:mm:ssZ",o=x.z(this),i=this.$H,u=this.$m,a=this.$M,c=e.weekdays,s=e.months,f=function(t,e,o,i){return t&&(t[e]||t(r,n))||o[e].substr(0,i)},l=function(t){return x.s(i%12||12,t,"0")},v=e.meridiem||function(t,r,e){var n=t<12?"AM":"PM";return e?n.toLowerCase():n},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:x.s(a+1,2,"0"),MMM:f(e.monthsShort,a,s,3),MMMM:f(s,a),D:this.$D,DD:x.s(this.$D,2,"0"),d:String(this.$W),dd:f(e.weekdaysMin,this.$W,c,2),ddd:f(e.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(i),HH:x.s(i,2,"0"),h:l(1),hh:l(2),a:v(i,u,!0),A:v(i,u,!1),m:String(u),mm:x.s(u,2,"0"),s:String(this.$s),ss:x.s(this.$s,2,"0"),SSS:x.s(this.$ms,3,"0"),Z:o};return n.replace(d,(function(t,r){return r||h[t]||o.replace(":","")}))},b.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},b.diff=function(n,c,h){var p,y=x.p(c),d=S(n),b=(d.utcOffset()-this.utcOffset())*r,g=this-d,m=x.m(this,d);return m=(p={},p[v]=m/12,p[f]=m,p[l]=m/3,p[s]=(g-b)/6048e5,p[a]=(g-b)/864e5,p[u]=g/e,p[i]=g/r,p[o]=g/t,p)[y]||g,h?m:x.a(m)},b.daysInMonth=function(){return this.endOf(f).$D},b.$locale=function(){return _[this.$L]},b.locale=function(t,r){if(!t)return this.$L;var e=this.clone(),n=O(t,r,!0);return n&&(e.$L=n),e},b.clone=function(){return x.w(this.$d,this)},b.toDate=function(){return new Date(this.valueOf())},b.toJSON=function(){return this.isValid()?this.toISOString():null},b.toISOString=function(){return this.$d.toISOString()},b.toString=function(){return this.$d.toUTCString()},c}(),T=$.prototype;return S.prototype=T,[["$ms",n],["$s",o],["$m",i],["$H",u],["$W",a],["$M",f],["$y",v],["$D",h]].forEach((function(t){T[t[1]]=function(r){return this.$g(r,t[0],t[1])}})),S.extend=function(t,r){return t.$i||(t(r,$,S),t.$i=!0),S},S.locale=O,S.isDayjs=w,S.unix=function(t){return S(1e3*t)},S.en=_[j],S.Ls=_,S.p={},S}()}));function co(){return ao().format("YYYY-MM-DDTHH:mm:ssZ")}function so(t){if(Nt(t)){for(var r in t)return!0;return!1}return!1}function fo(t){if(!On(t))return{};var r={};try{r=JSON.parse(t)}catch(t){r={}}return r}function lo(t){return"[object Undefined]"===Object.prototype.toString.call(t)}function vo(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(lo(t))return"";var e="";try{e=r?JSON.stringify(t,null,2):JSON.stringify(t)}catch(t){e=""}return e}var ho=o.default.resolve();function po(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={};t.fnTableTags||(t.fnTableTags="tableTags.json");var e="".concat(ho,"/").concat(t.fnTableTags),n=new u.default.EventEmitter;function o(t){for(var r=arguments.length,e=new Array(r>1?r-1:0),o=1;o<r;o++)e[o-1]=arguments[o];setTimeout((function(){n.emit.apply(n,[t].concat(e))}),1)}function a(){var t={};try{if(i.default.existsSync(e)){var r=fo(i.default.readFileSync(e,"utf8"));so(r)&&(t=r)}}catch(t){o("error",{msg:"readTableTags catch",err:t})}return t}function c(){try{var t=vo(r);i.default.writeFileSync(e,t,"utf8")}catch(t){o("error",{msg:"writeTableTags catch",err:t})}}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"useInputFirst";r="useStorageFirst"===e?uo(t,a()):"useInputOnly"===e?t:"useStorageOnly"===e?a():uo(a(),t),c()}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r=uo(r,t),c()}function l(){return r}var v=In((function(){c(),o("changeTableTags",r)}),200);function h(t){r[t]=co()+"|"+Ln(6),v()}return n.readTableTags=a,n.writeTableTags=c,n.initTableTags=s,n.setTableTags=f,n.getTableTags=l,n.updateTableTag=h,n}function yo(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=zt(),e=Ft(t,"instWConverServer",null);if(null===e)return r.emit("error","invalid opt.instWConverServer"),r;var n=Ft(t,"dbORMs",null);if(!Nt(n))return r.emit("error","invalid opt.dbORMs"),r;var o=Ft(t,"tableNames",null);if(!cn(o))return r.emit("error","invalid opt.tableNames"),r;0===te(o)&&console.log("opt.tableNames.lenght = 0");var i=new po;o=an(o);var u={};function a(t){var r={};return jr(o,(function(e){var n=e,o=t[e];r[n]=o})),r}return jr(o,(function(t){u[t]=Ln(6)})),i.initTableTags(u,"useInputOnly"),jr(o,(function(t){var r=n[t];if(!r)throw new Error("invalid dbORMs.".concat(t));r.on("change",(function(){i.updateTableTag(t)}))})),e.on("clientEnter",(function(t,r){e.deliver(t,{mode:"syncTable",data:i.readTableTags()})})),i.on("changeTableTags",(function(t){e.broadcast({mode:"syncTable",data:a(t)})})),i}function bo(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function go(t){return function(t){if(Array.isArray(t))return bo(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(t){if("string"==typeof t)return bo(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?bo(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mo(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function jo(t,r,e,n,o,i,u){try{var a=t[i](u),c=a.value}catch(t){return void e(t)}a.done?r(c):Promise.resolve(c).then(n,o)}function _o(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function u(t){jo(i,n,o,u,a,"next",t)}function a(t){jo(i,n,o,u,a,"throw",t)}u(void 0)}))}}var wo=f((function(t){var r=function(t){var r,e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function s(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{s({},"")}catch(t){s=function(t,r,e){return t[r]=e}}function f(t,r,e,n){var o=r&&r.prototype instanceof b?r:b,i=Object.create(o.prototype),u=new A(n||[]);return i._invoke=function(t,r,e){var n=v;return function(o,i){if(n===p)throw new Error("Generator is already running");if(n===y){if("throw"===o)throw i;return E()}for(e.method=o,e.arg=i;;){var u=e.delegate;if(u){var a=$(u,e);if(a){if(a===d)continue;return a}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===v)throw n=y,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=p;var c=l(t,r,e);if("normal"===c.type){if(n=e.done?y:h,c.arg===d)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(n=y,e.method="throw",e.arg=c.arg)}}}(t,e,u),i}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var v="suspendedStart",h="suspendedYield",p="executing",y="completed",d={};function b(){}function g(){}function m(){}var j={};s(j,i,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(D([])));w&&w!==e&&n.call(w,i)&&(j=w);var O=m.prototype=b.prototype=Object.create(j);function S(t){["next","throw","return"].forEach((function(r){s(t,r,(function(t){return this._invoke(r,t)}))}))}function x(t,r){function e(o,i,u,a){var s=l(t[o],t,i);if("throw"!==s.type){var f=s.arg,v=f.value;return v&&"object"===c(v)&&n.call(v,"__await")?r.resolve(v.__await).then((function(t){e("next",t,u,a)}),(function(t){e("throw",t,u,a)})):r.resolve(v).then((function(t){f.value=t,u(f)}),(function(t){return e("throw",t,u,a)}))}a(s.arg)}var o;this._invoke=function(t,n){function i(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(i,i):i()}}function $(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,$(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function T(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function M(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function D(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,u=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return u.next=u}}return{next:E}}function E(){return{value:r,done:!0}}return g.prototype=m,s(O,"constructor",m),s(m,"constructor",g),g.displayName=s(m,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===g||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,a,"GeneratorFunction")),t.prototype=Object.create(O),t},t.awrap=function(t){return{__await:t}},S(x.prototype),s(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var u=new x(f(r,e,n,o),i);return t.isGeneratorFunction(e)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},S(O),s(O,a,"Generator"),s(O,i,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(M),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return a.type="throw",a.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var u=this.tryEntries[i],a=u.completion;if("root"===u.tryLoc)return o("end");if(u.tryLoc<=this.prev){var c=n.call(u,"catchLoc"),s=n.call(u,"finallyLoc");if(c&&s){if(this.prev<u.catchLoc)return o(u.catchLoc,!0);if(this.prev<u.finallyLoc)return o(u.finallyLoc)}else if(c){if(this.prev<u.catchLoc)return o(u.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return o(u.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=t,u.arg=r,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(u)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),M(e),d}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;M(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:D(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),d}},t}(t.exports);try{regeneratorRuntime=r}catch(t){"object"===("undefined"==typeof globalThis?"undefined":c(globalThis))?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}})),Oo=wo;function So(t){return!!lo(t)||(!!function(t){return"[object Null]"===Object.prototype.toString.call(t)}(t)||(!!function(t){if(Nt(t)){for(var r in t)return!1;return!0}return!1}(t)||(!!function(t){return!(!wn(t)||""!==t)}(t)||!!function(t){return!!cn(t)&&0===t.length}(t))))}function xo(t){return!!cn(t)&&(0!==t.length&&(1!==t.length||!So(t[0])))}function $o(t){var r=Object.prototype.toString.call(t);return"[object Function]"===r||"[object AsyncFunction]"===r}function To(t){var r,e=Object.prototype.toString.call(t);if(r="[object Promise]"===e)return!0;if("[object Function]"!==e)return!1;try{r="function"!=typeof t.subscribe&&"function"==typeof t.then}catch(t){}return r}function Mo(t,r){return!!Nt(t)&&(!(!On(r)&&!Sn(r))&&r in t)}function Ao(t){if(!On(t)&&!Sn(t)&&!x(t))return"";var r="";try{r=String(t)}catch(t){}try{r=t.toString()}catch(t){}return r}function Do(){var t,r,e=new Promise((function(){t=arguments[0],r=arguments[1]}));return e.resolve=t,e.reject=r,e}function Eo(t){return function(){var r=Do(),e=null,n=null;try{e=t.apply(this,arguments)}catch(t){n=t}return null!==n?r.resolve({state:"error",msg:n}):To(e)?e.then((function(t){r.resolve({state:"success",msg:t})})).catch((function(t){"cancelled"===Ft(t,"reason")?r.resolve({state:"cancelled",msg:""}):r.resolve({state:"error",msg:t})})):r.resolve({state:"success",msg:e}),r}}function ko(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function Lo(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?ko(Object(e),!0).forEach((function(r){mo(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ko(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}var Po={},Fo=null;function No(t,r,e){var n={};return jr(t,(function(t){jr(r,(function(r){var o="".concat(t,".").concat(r);n[o]=function(){var n=_o(Oo.mark((function n(o,i){var u;return Oo.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e(o,t,r,i);case 2:return u=n.sent,n.abrupt("return",u);case 4:case"end":return n.stop()}}),n)})));return function(t,r){return n.apply(this,arguments)}}()}))})),n}function Io(t){return Co.apply(this,arguments)}function Co(){return(Co=_o(Oo.mark((function t(r){var e,n,o,i,u,a,c,s,f;return Oo.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.func,n=r.input,o=r.pm,i="",Mo(n,"__sysToken__")){t.next=5;break}return o.resolve({state:"error",msg:"invalid token"}),t.abrupt("return",o);case 5:if(i=Ao(n.__sysToken__),Mo(n,"__sysInputArgs__")){t.next=9;break}return o.resolve({state:"error",msg:"invalid input"}),t.abrupt("return",o);case 9:if(n=n.__sysInputArgs__,u="",!To(a=Fo(i))){t.next=18;break}return t.next=15,a;case 15:u=t.sent,t.next=19;break;case 18:u=a;case 19:if(On(u)||(u=""),"getFuncList"!==e){t.next=24;break}return c={state:"success",msg:dr(Po)},o.resolve(c),t.abrupt("return",o);case 24:if(Mo(Po,e)){t.next=27;break}return o.resolve({state:"error",msg:"invalid func[".concat(e,"]")}),t.abrupt("return",o);case 27:return s=Po[e],t.prev=28,t.next=31,Eo(s).apply(void 0,[u].concat(go(n)));case 31:f=t.sent,o.resolve(f),t.next=38;break;case 35:t.prev=35,t.t0=t.catch(28),o.resolve({state:"error",msg:"無法識別func: ".concat(e)});case 38:return t.abrupt("return",o);case 39:case"end":return t.stop()}}),t,null,[[28,35]])})))).apply(this,arguments)}function Ro(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=zt(),e=Ft(t,"instWConverServer",null);if(null===e)return r.emit("error","invalid opt.instWConverServer"),r;$o(Fo=Ft(t,"cbGetUserIDFromToken",null))||(Fo=function(){var t=_o(Oo.mark((function t(){return Oo.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return","");case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());var n=Ft(t,"useDbORM",null);Ct(n)||(n=!0);var o=null;if(n&&!$o(o=Ft(t,"operORM",null)))return r.emit("error","invalid opt.operORM when useDbORM=true"),r;var i=[];if(n&&!cn(i=Ft(t,"tableNames",null)))return r.emit("error","invalid opt.tableNames when useDbORM=true"),r;var u=[];n&&(cn(u=Ft(t,"methods",null))||(u=["select","insert","save","del"]));var a=Ft(t,"extFuncs",null),c=Ft(t,"hookBefores",null),s=Ft(t,"hookAfters",null),f={};return n&&(i=an(i),f=No(i,u,o)),Nt(a)&&jr(a,(function(t,r){f[r]=t})),Po=f,e.on("execute",function(){var t=_o(Oo.mark((function t(e,n,o){var i,u,a;return Oo.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i={func:e,input:n,pm:o},$o(c))try{c(i)}catch(t){r.emit("error",t)}else xo(c)&&jr(c,(function(t){if($o(t))try{t(i)}catch(t){r.emit("error",t)}}));return t.next=4,Io(i).catch((function(t){r.emit("error",t)}));case 4:if(u=t.sent,a=Lo(Lo({},i),{},{output:u}),$o(s))try{s(a)}catch(t){r.emit("error",t)}else xo(s)&&jr(s,(function(t){if($o(t))try{t(a)}catch(t){r.emit("error",t)}}));case 7:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}()),r}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=zt(),e=Ft(t,"instWConverServer",null);if(null===e)return r.emit("error","invalid opt.instWConverServer"),r;var n=Ft(t,"useDbORM",null);Ct(n)||(n=!0);var o=Ft(t,"dbORMs",null),i=Ft(t,"operORM",null),u=Ft(t,"tableNamesExec",null),a=Ft(t,"methodsExec",null),c=Ft(t,"tableNamesSync",null),s=Ft(t,"cbGetUserIDFromToken",null),f=Ft(t,"extFuncs",null),l=Ft(t,"hookBefores",null),v=Ft(t,"hookAfters",null),h=Ro({instWConverServer:e,cbGetUserIDFromToken:s,useDbORM:n,operORM:i,tableNames:u,methods:a,extFuncs:f,hookBefores:l,hookAfters:v});if(h.on("error",(function(t){r.emit("error",t)})),n){if(!Nt(o))return r.emit("error","invalid opt.dbORMs when useDbORM=true"),r;var p=yo({instWConverServer:e,dbORMs:o,tableNames:c});p.on("error",(function(t){r.emit("error",t)}))}return r}}));
//# sourceMappingURL=w-serv-webdata-server.umd.js.map
