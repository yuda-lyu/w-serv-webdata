/*!
 * w-serv-webdata-client v1.0.30
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-serv-webdata-client"]=e()}(this,(function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var r=Array.isArray,n="object"==typeof t&&t&&t.Object===Object&&t,o=n,a="object"==typeof self&&self&&self.Object===Object&&self,u=o||a||Function("return this")(),i=u.Symbol,c=i,f=Object.prototype,s=f.hasOwnProperty,l=f.toString,v=c?c.toStringTag:void 0;var p=function(t){var e=s.call(t,v),r=t[v];try{t[v]=void 0;var n=!0}catch(t){}var o=l.call(t);return n&&(e?t[v]=r:delete t[v]),o},b=Object.prototype.toString;var h=p,y=function(t){return b.call(t)},d=i?i.toStringTag:void 0;var g=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":d&&d in Object(t)?h(t):y(t)};var j=function(t){return null!=t&&"object"==typeof t},_=g,w=j;var T=function(t){return"symbol"==typeof t||w(t)&&"[object Symbol]"==_(t)},m=r,O=T,A=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,x=/^\w*$/;var S=function(t,e){if(m(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!O(t))||(x.test(t)||!A.test(t)||null!=e&&t in Object(e))};var P=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},I=g,z=P;var U,F=function(t){if(!z(t))return!1;var e=I(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},E=u["__core-js_shared__"],N=(U=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+U:"";var C=function(t){return!!N&&N in t},M=Function.prototype.toString;var $=function(t){if(null!=t){try{return M.call(t)}catch(t){}try{return t+""}catch(t){}}return""},k=F,B=C,D=P,L=$,R=/^\[object .+?Constructor\]$/,G=Function.prototype,W=Object.prototype,V=G.toString,q=W.hasOwnProperty,H=RegExp("^"+V.call(q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var J=function(t){return!(!D(t)||B(t))&&(k(t)?H:R).test(L(t))},K=function(t,e){return null==t?void 0:t[e]};var Q=function(t,e){var r=K(t,e);return J(r)?r:void 0},X=Q(Object,"create"),Y=X;var Z=function(){this.__data__=Y?Y(null):{},this.size=0};var tt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},et=X,rt=Object.prototype.hasOwnProperty;var nt=function(t){var e=this.__data__;if(et){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return rt.call(e,t)?e[t]:void 0},ot=X,at=Object.prototype.hasOwnProperty;var ut=X;var it=Z,ct=tt,ft=nt,st=function(t){var e=this.__data__;return ot?void 0!==e[t]:at.call(e,t)},lt=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=ut&&void 0===e?"__lodash_hash_undefined__":e,this};function vt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}vt.prototype.clear=it,vt.prototype.delete=ct,vt.prototype.get=ft,vt.prototype.has=st,vt.prototype.set=lt;var pt=vt;var bt=function(){this.__data__=[],this.size=0};var ht=function(t,e){return t===e||t!=t&&e!=e},yt=ht;var dt=function(t,e){for(var r=t.length;r--;)if(yt(t[r][0],e))return r;return-1},gt=dt,jt=Array.prototype.splice;var _t=dt;var wt=dt;var Tt=dt;var mt=bt,Ot=function(t){var e=this.__data__,r=gt(e,t);return!(r<0)&&(r==e.length-1?e.pop():jt.call(e,r,1),--this.size,!0)},At=function(t){var e=this.__data__,r=_t(e,t);return r<0?void 0:e[r][1]},xt=function(t){return wt(this.__data__,t)>-1},St=function(t,e){var r=this.__data__,n=Tt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function Pt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Pt.prototype.clear=mt,Pt.prototype.delete=Ot,Pt.prototype.get=At,Pt.prototype.has=xt,Pt.prototype.set=St;var It=Pt,zt=Q(u,"Map"),Ut=pt,Ft=It,Et=zt;var Nt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Ct=function(t,e){var r=t.__data__;return Nt(e)?r["string"==typeof e?"string":"hash"]:r.map},Mt=Ct;var $t=Ct;var kt=Ct;var Bt=Ct;var Dt=function(){this.size=0,this.__data__={hash:new Ut,map:new(Et||Ft),string:new Ut}},Lt=function(t){var e=Mt(this,t).delete(t);return this.size-=e?1:0,e},Rt=function(t){return $t(this,t).get(t)},Gt=function(t){return kt(this,t).has(t)},Wt=function(t,e){var r=Bt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function Vt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Vt.prototype.clear=Dt,Vt.prototype.delete=Lt,Vt.prototype.get=Rt,Vt.prototype.has=Gt,Vt.prototype.set=Wt;var qt=Vt,Ht=qt;function Jt(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var u=t.apply(this,n);return r.cache=a.set(o,u)||a,u};return r.cache=new(Jt.Cache||Ht),r}Jt.Cache=Ht;var Kt=Jt;var Qt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xt=/\\(\\)?/g,Yt=function(t){var e=Kt(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Qt,(function(t,r,n,o){e.push(n?o.replace(Xt,"$1"):r||t)})),e}));var Zt=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o},te=r,ee=T,re=i?i.prototype:void 0,ne=re?re.toString:void 0;var oe=function t(e){if("string"==typeof e)return e;if(te(e))return Zt(e,t)+"";if(ee(e))return ne?ne.call(e):"";var r=e+"";return"0"==r&&1/e==-Infinity?"-0":r},ae=oe;var ue=function(t){return null==t?"":ae(t)},ie=r,ce=S,fe=Yt,se=ue;var le=function(t,e){return ie(t)?t:ce(t,e)?[t]:fe(se(t))},ve=T;var pe=function(t){if("string"==typeof t||ve(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e},be=le,he=pe;var ye=function(t,e){for(var r=0,n=(e=be(e,t)).length;null!=t&&r<n;)t=t[he(e[r++])];return r&&r==n?t:void 0};var de=function(t,e,r){var n=null==t?void 0:ye(t,e);return void 0===n?r:n},ge=Q,je=function(){try{var t=ge(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var _e=function(t,e,r){"__proto__"==e&&je?je(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},we=_e,Te=ht,me=Object.prototype.hasOwnProperty;var Oe=function(t,e,r){var n=t[e];me.call(t,e)&&Te(n,r)&&(void 0!==r||e in t)||we(t,e,r)},Ae=/^(?:0|[1-9]\d*)$/;var xe=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&Ae.test(t))&&t>-1&&t%1==0&&t<e},Se=Oe,Pe=le,Ie=xe,ze=P,Ue=pe;var Fe=function(t,e,r,n){if(!ze(t))return t;for(var o=-1,a=(e=Pe(e,t)).length,u=a-1,i=t;null!=i&&++o<a;){var c=Ue(e[o]),f=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=u){var s=i[c];void 0===(f=n?n(s,c,i):void 0)&&(f=ze(s)?s:Ie(e[o+1])?[]:{})}Se(i,c,f),i=i[c]}return t};var Ee=function(t,e,r){return null==t?t:Fe(t,e,r)},Ne={},Ce={get exports(){return Ne},set exports(t){Ne=t}};var Me=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t};var $e=function(t){return function(e,r,n){for(var o=-1,a=Object(e),u=n(e),i=u.length;i--;){var c=u[t?i:++o];if(!1===r(a[c],c,a))break}return e}}();var ke=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n},Be=g,De=j;var Le=function(t){return De(t)&&"[object Arguments]"==Be(t)},Re=j,Ge=Object.prototype,We=Ge.hasOwnProperty,Ve=Ge.propertyIsEnumerable,qe=Le(function(){return arguments}())?Le:function(t){return Re(t)&&We.call(t,"callee")&&!Ve.call(t,"callee")},He=qe,Je={};var Ke=function(){return!1};!function(t,e){var r=u,n=Ke,o=e&&!e.nodeType&&e,a=o&&t&&!t.nodeType&&t,i=a&&a.exports===o?r.Buffer:void 0,c=(i?i.isBuffer:void 0)||n;t.exports=c}({get exports(){return Je},set exports(t){Je=t}},Je);var Qe=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Xe=g,Ye=Qe,Ze=j,tr={};tr["[object Float32Array]"]=tr["[object Float64Array]"]=tr["[object Int8Array]"]=tr["[object Int16Array]"]=tr["[object Int32Array]"]=tr["[object Uint8Array]"]=tr["[object Uint8ClampedArray]"]=tr["[object Uint16Array]"]=tr["[object Uint32Array]"]=!0,tr["[object Arguments]"]=tr["[object Array]"]=tr["[object ArrayBuffer]"]=tr["[object Boolean]"]=tr["[object DataView]"]=tr["[object Date]"]=tr["[object Error]"]=tr["[object Function]"]=tr["[object Map]"]=tr["[object Number]"]=tr["[object Object]"]=tr["[object RegExp]"]=tr["[object Set]"]=tr["[object String]"]=tr["[object WeakMap]"]=!1;var er=function(t){return Ze(t)&&Ye(t.length)&&!!tr[Xe(t)]};var rr=function(t){return function(e){return t(e)}},nr={};!function(t,e){var r=n,o=e&&!e.nodeType&&e,a=o&&t&&!t.nodeType&&t,u=a&&a.exports===o&&r.process,i=function(){try{var t=a&&a.require&&a.require("util").types;return t||u&&u.binding&&u.binding("util")}catch(t){}}();t.exports=i}({get exports(){return nr},set exports(t){nr=t}},nr);var or=er,ar=rr,ur=nr&&nr.isTypedArray,ir=ur?ar(ur):or,cr=ke,fr=He,sr=r,lr=Je,vr=xe,pr=ir,br=Object.prototype.hasOwnProperty;var hr=function(t,e){var r=sr(t),n=!r&&fr(t),o=!r&&!n&&lr(t),a=!r&&!n&&!o&&pr(t),u=r||n||o||a,i=u?cr(t.length,String):[],c=i.length;for(var f in t)!e&&!br.call(t,f)||u&&("length"==f||o&&("offset"==f||"parent"==f)||a&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||vr(f,c))||i.push(f);return i},yr=Object.prototype;var dr=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||yr)};var gr=function(t,e){return function(r){return t(e(r))}},jr=gr(Object.keys,Object),_r=dr,wr=jr,Tr=Object.prototype.hasOwnProperty;var mr=F,Or=Qe;var Ar=function(t){return null!=t&&Or(t.length)&&!mr(t)},xr=hr,Sr=function(t){if(!_r(t))return wr(t);var e=[];for(var r in Object(t))Tr.call(t,r)&&"constructor"!=r&&e.push(r);return e},Pr=Ar;var Ir=function(t){return Pr(t)?xr(t):Sr(t)},zr=$e,Ur=Ir;var Fr=Ar;var Er=function(t,e){return function(r,n){if(null==r)return r;if(!Fr(r))return t(r,n);for(var o=r.length,a=e?o:-1,u=Object(r);(e?a--:++a<o)&&!1!==n(u[a],a,u););return r}}((function(t,e){return t&&zr(t,e,Ur)}));var Nr=function(t){return t};var Cr=Me,Mr=Er,$r=function(t){return"function"==typeof t?t:Nr},kr=r;var Br=function(t,e){return(kr(t)?Cr:Mr)(t,$r(e))};!function(t){t.exports=Br}(Ce);var Dr=e(Ne);var Lr=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0};var Rr=function(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var a=Array(o);++n<o;)a[n]=t[n+e];return a},Gr=/\s/;var Wr=function(t){for(var e=t.length;e--&&Gr.test(t.charAt(e)););return e},Vr=/^\s+/;var qr=function(t){return t?t.slice(0,Wr(t)+1).replace(Vr,""):t},Hr=qr,Jr=P,Kr=T,Qr=/^[-+]0x[0-9a-f]+$/i,Xr=/^0b[01]+$/i,Yr=/^0o[0-7]+$/i,Zr=parseInt;var tn=function(t){if("number"==typeof t)return t;if(Kr(t))return NaN;if(Jr(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Jr(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Hr(t);var r=Xr.test(t);return r||Yr.test(t)?Zr(t.slice(2),r?2:8):Qr.test(t)?NaN:+t},en=tn,rn=1/0;var nn=function(t){return t?(t=en(t))===rn||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0},on=nn;var an=function(t){var e=on(t),r=e%1;return e==e?r?e-r:e:0},un=Rr,cn=an;var fn=function(t,e,r){var n=null==t?0:t.length;return n?(e=r||void 0===e?1:cn(e),un(t,0,(e=n-e)<0?0:e)):[]};function sn(){let t,e,r=new Promise((function(){t=arguments[0],e=arguments[1]}));return r.resolve=t,r.reject=e,r}var ln={};!function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function a(t,e,n,a,u){if("function"!=typeof n)throw new TypeError("The listener must be a function");var i=new o(n,a||t,u),c=r?r+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],i]:t._events[c].push(i):(t._events[c]=i,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function i(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),i.prototype.eventNames=function(){var t,n,o=[];if(0===this._eventsCount)return o;for(n in t=this._events)e.call(t,n)&&o.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},i.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,a=n.length,u=new Array(a);o<a;o++)u[o]=n[o].fn;return u},i.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},i.prototype.emit=function(t,e,n,o,a,u){var i=r?r+t:t;if(!this._events[i])return!1;var c,f,s=this._events[i],l=arguments.length;if(s.fn){switch(s.once&&this.removeListener(t,s.fn,void 0,!0),l){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,e),!0;case 3:return s.fn.call(s.context,e,n),!0;case 4:return s.fn.call(s.context,e,n,o),!0;case 5:return s.fn.call(s.context,e,n,o,a),!0;case 6:return s.fn.call(s.context,e,n,o,a,u),!0}for(f=1,c=new Array(l-1);f<l;f++)c[f-1]=arguments[f];s.fn.apply(s.context,c)}else{var v,p=s.length;for(f=0;f<p;f++)switch(s[f].once&&this.removeListener(t,s[f].fn,void 0,!0),l){case 1:s[f].fn.call(s[f].context);break;case 2:s[f].fn.call(s[f].context,e);break;case 3:s[f].fn.call(s[f].context,e,n);break;case 4:s[f].fn.call(s[f].context,e,n,o);break;default:if(!c)for(v=1,c=new Array(l-1);v<l;v++)c[v-1]=arguments[v];s[f].fn.apply(s[f].context,c)}}return!0},i.prototype.on=function(t,e,r){return a(this,t,e,r,!1)},i.prototype.once=function(t,e,r){return a(this,t,e,r,!0)},i.prototype.removeListener=function(t,e,n,o){var a=r?r+t:t;if(!this._events[a])return this;if(!e)return u(this,a),this;var i=this._events[a];if(i.fn)i.fn!==e||o&&!i.once||n&&i.context!==n||u(this,a);else{for(var c=0,f=[],s=i.length;c<s;c++)(i[c].fn!==e||o&&!i[c].once||n&&i[c].context!==n)&&f.push(i[c]);f.length?this._events[a]=1===f.length?f[0]:f:u(this,a)}return this},i.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&u(this,e)):(this._events=new n,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=r,i.EventEmitter=i,t.exports=i}({get exports(){return ln},set exports(t){ln=t}});var vn=ln;function pn(){return new vn}function bn(t){if(function(t){return"[object Object]"===Object.prototype.toString.call(t)}(t)){for(let e in t)return!0;return!1}return!1}function hn(t){let e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e}var yn=It;var dn=It,gn=zt,jn=qt;var _n=It,wn=function(){this.__data__=new yn,this.size=0},Tn=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},mn=function(t){return this.__data__.get(t)},On=function(t){return this.__data__.has(t)},An=function(t,e){var r=this.__data__;if(r instanceof dn){var n=r.__data__;if(!gn||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new jn(n)}return r.set(t,e),this.size=r.size,this};function xn(t){var e=this.__data__=new _n(t);this.size=e.size}xn.prototype.clear=wn,xn.prototype.delete=Tn,xn.prototype.get=mn,xn.prototype.has=On,xn.prototype.set=An;var Sn=xn,Pn=Oe,In=_e;var zn=function(t,e,r,n){var o=!r;r||(r={});for(var a=-1,u=e.length;++a<u;){var i=e[a],c=n?n(r[i],t[i],i,r,t):void 0;void 0===c&&(c=t[i]),o?In(r,i,c):Pn(r,i,c)}return r},Un=zn,Fn=Ir;var En=function(t,e){return t&&Un(e,Fn(e),t)};var Nn=P,Cn=dr,Mn=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},$n=Object.prototype.hasOwnProperty;var kn=hr,Bn=function(t){if(!Nn(t))return Mn(t);var e=Cn(t),r=[];for(var n in t)("constructor"!=n||!e&&$n.call(t,n))&&r.push(n);return r},Dn=Ar;var Ln=function(t){return Dn(t)?kn(t,!0):Bn(t)},Rn=zn,Gn=Ln;var Wn=function(t,e){return t&&Rn(e,Gn(e),t)},Vn={};!function(t,e){var r=u,n=e&&!e.nodeType&&e,o=n&&t&&!t.nodeType&&t,a=o&&o.exports===n?r.Buffer:void 0,i=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=i?i(r):new t.constructor(r);return t.copy(n),n}}({get exports(){return Vn},set exports(t){Vn=t}},Vn);var qn=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var Hn=function(){return[]},Jn=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,a=[];++r<n;){var u=t[r];e(u,r,t)&&(a[o++]=u)}return a},Kn=Hn,Qn=Object.prototype.propertyIsEnumerable,Xn=Object.getOwnPropertySymbols,Yn=Xn?function(t){return null==t?[]:(t=Object(t),Jn(Xn(t),(function(e){return Qn.call(t,e)})))}:Kn,Zn=zn,to=Yn;var eo=function(t,e){return Zn(t,to(t),e)};var ro=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},no=gr(Object.getPrototypeOf,Object),oo=ro,ao=no,uo=Yn,io=Hn,co=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)oo(e,uo(t)),t=ao(t);return e}:io,fo=zn,so=co;var lo=function(t,e){return fo(t,so(t),e)},vo=ro,po=r;var bo=function(t,e,r){var n=e(t);return po(t)?n:vo(n,r(t))},ho=bo,yo=Yn,go=Ir;var jo=function(t){return ho(t,go,yo)},_o=bo,wo=co,To=Ln;var mo=function(t){return _o(t,To,wo)},Oo=Q(u,"DataView"),Ao=zt,xo=Q(u,"Promise"),So=Q(u,"Set"),Po=Q(u,"WeakMap"),Io=g,zo=$,Uo="[object Map]",Fo="[object Promise]",Eo="[object Set]",No="[object WeakMap]",Co="[object DataView]",Mo=zo(Oo),$o=zo(Ao),ko=zo(xo),Bo=zo(So),Do=zo(Po),Lo=Io;(Oo&&Lo(new Oo(new ArrayBuffer(1)))!=Co||Ao&&Lo(new Ao)!=Uo||xo&&Lo(xo.resolve())!=Fo||So&&Lo(new So)!=Eo||Po&&Lo(new Po)!=No)&&(Lo=function(t){var e=Io(t),r="[object Object]"==e?t.constructor:void 0,n=r?zo(r):"";if(n)switch(n){case Mo:return Co;case $o:return Uo;case ko:return Fo;case Bo:return Eo;case Do:return No}return e});var Ro=Lo,Go=Object.prototype.hasOwnProperty;var Wo=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Go.call(t,"index")&&(r.index=t.index,r.input=t.input),r},Vo=u.Uint8Array;var qo=function(t){var e=new t.constructor(t.byteLength);return new Vo(e).set(new Vo(t)),e},Ho=qo;var Jo=function(t,e){var r=e?Ho(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},Ko=/\w*$/;var Qo=function(t){var e=new t.constructor(t.source,Ko.exec(t));return e.lastIndex=t.lastIndex,e},Xo=i?i.prototype:void 0,Yo=Xo?Xo.valueOf:void 0;var Zo=qo;var ta=qo,ea=Jo,ra=Qo,na=function(t){return Yo?Object(Yo.call(t)):{}},oa=function(t,e){var r=e?Zo(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)};var aa=function(t,e,r){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return ta(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return ea(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return oa(t,r);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return ra(t);case"[object Symbol]":return na(t)}},ua=P,ia=Object.create,ca=function(){function t(){}return function(e){if(!ua(e))return{};if(ia)return ia(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),fa=no,sa=dr;var la=function(t){return"function"!=typeof t.constructor||sa(t)?{}:ca(fa(t))},va=Ro,pa=j;var ba=function(t){return pa(t)&&"[object Map]"==va(t)},ha=rr,ya=nr&&nr.isMap,da=ya?ha(ya):ba,ga=Ro,ja=j;var _a=function(t){return ja(t)&&"[object Set]"==ga(t)},wa=rr,Ta=nr&&nr.isSet,ma=Ta?wa(Ta):_a,Oa=Sn,Aa=Me,xa=Oe,Sa=En,Pa=Wn,Ia=Vn,za=qn,Ua=eo,Fa=lo,Ea=jo,Na=mo,Ca=Ro,Ma=Wo,$a=aa,ka=la,Ba=r,Da=Je,La=da,Ra=P,Ga=ma,Wa=Ir,Va=Ln,qa="[object Arguments]",Ha="[object Function]",Ja="[object Object]",Ka={};Ka[qa]=Ka["[object Array]"]=Ka["[object ArrayBuffer]"]=Ka["[object DataView]"]=Ka["[object Boolean]"]=Ka["[object Date]"]=Ka["[object Float32Array]"]=Ka["[object Float64Array]"]=Ka["[object Int8Array]"]=Ka["[object Int16Array]"]=Ka["[object Int32Array]"]=Ka["[object Map]"]=Ka["[object Number]"]=Ka[Ja]=Ka["[object RegExp]"]=Ka["[object Set]"]=Ka["[object String]"]=Ka["[object Symbol]"]=Ka["[object Uint8Array]"]=Ka["[object Uint8ClampedArray]"]=Ka["[object Uint16Array]"]=Ka["[object Uint32Array]"]=!0,Ka["[object Error]"]=Ka[Ha]=Ka["[object WeakMap]"]=!1;var Qa=function t(e,r,n,o,a,u){var i,c=1&r,f=2&r,s=4&r;if(n&&(i=a?n(e,o,a,u):n(e)),void 0!==i)return i;if(!Ra(e))return e;var l=Ba(e);if(l){if(i=Ma(e),!c)return za(e,i)}else{var v=Ca(e),p=v==Ha||"[object GeneratorFunction]"==v;if(Da(e))return Ia(e,c);if(v==Ja||v==qa||p&&!a){if(i=f||p?{}:ka(e),!c)return f?Fa(e,Pa(i,e)):Ua(e,Sa(i,e))}else{if(!Ka[v])return a?e:{};i=$a(e,v,c)}}u||(u=new Oa);var b=u.get(e);if(b)return b;u.set(e,i),Ga(e)?e.forEach((function(o){i.add(t(o,r,n,o,e,u))})):La(e)&&e.forEach((function(o,a){i.set(a,t(o,r,n,a,e,u))}));var h=l?void 0:(s?f?Na:Ea:f?Va:Wa)(e);return Aa(h||e,(function(o,a){h&&(o=e[a=o]),xa(i,a,t(o,r,n,a,e,u))})),i},Xa=Qa;var Ya=function(t){return Xa(t,5)},Za=an,tu=tn,eu=ue,ru=u.isFinite,nu=Math.min;var ou=function(t){var e=Math[t];return function(t,r){if(t=tu(t),(r=null==r?0:nu(Za(r),292))&&ru(t)){var n=(eu(t)+"e").split("e"),o=e(n[0]+"e"+(+n[1]+r));return+((n=(eu(o)+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}("round");function au(t){return!(!function(t){return"[object String]"===Object.prototype.toString.call(t)}(t)||""===t)}function uu(t){let e=!1;return au(t)?e=!isNaN(Number(t)):function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)&&(e=!0),e}function iu(t){if(!uu(t))return 0;t=function(t){return uu(t)?nn(t):0}(t);let e=ou(t);return"0"===String(e)?0:e}var cu=ue;var fu=function(t){return cu(t).toLowerCase()},su=Rr;var lu=function(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:su(t,e,r)};var vu=function(t,e,r,n){for(var o=t.length,a=r+(n?1:-1);n?a--:++a<o;)if(e(t[a],a,t))return a;return-1},pu=function(t){return t!=t},bu=function(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1};var hu=function(t,e,r){return e==e?bu(t,e,r):vu(t,pu,r)},yu=hu;var du=function(t,e){for(var r=t.length;r--&&yu(e,t[r],0)>-1;);return r},gu=hu;var ju=function(t,e){for(var r=-1,n=t.length;++r<n&&gu(e,t[r],0)>-1;);return r};var _u=function(t){return t.split("")},wu=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Tu=function(t){return wu.test(t)},mu="\\ud800-\\udfff",Ou="["+mu+"]",Au="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",xu="\\ud83c[\\udffb-\\udfff]",Su="[^"+mu+"]",Pu="(?:\\ud83c[\\udde6-\\uddff]){2}",Iu="[\\ud800-\\udbff][\\udc00-\\udfff]",zu="(?:"+Au+"|"+xu+")"+"?",Uu="[\\ufe0e\\ufe0f]?",Fu=Uu+zu+("(?:\\u200d(?:"+[Su,Pu,Iu].join("|")+")"+Uu+zu+")*"),Eu="(?:"+[Su+Au+"?",Au,Pu,Iu,Ou].join("|")+")",Nu=RegExp(xu+"(?="+xu+")|"+Eu+Fu,"g");var Cu=_u,Mu=Tu,$u=function(t){return t.match(Nu)||[]};var ku=oe,Bu=qr,Du=lu,Lu=du,Ru=ju,Gu=function(t){return Mu(t)?$u(t):Cu(t)},Wu=ue;var Vu=function(t,e,r){if((t=Wu(t))&&(r||void 0===e))return Bu(t);if(!t||!(e=ku(e)))return t;var n=Gu(t),o=Gu(e),a=Ru(n,o),u=Lu(n,o)+1;return Du(n,a,u).join("")},qu=g,Hu=j;var Ju=function(t){return!0===t||!1===t||Hu(t)&&"[object Boolean]"==qu(t)};function Ku(t){if(function(t){return Ju(t)}(t))return t;if(0===t)return!1;if(1===t)return!0;let e=!1;return au(t)&&"true"===(t=fu(Vu(t)))&&(e=!0),e}function Qu(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={},r=!1;t.usePollingTableTags?t.usePollingTableTags=Ku(t.usePollingTableTags):t.usePollingTableTags=!1,t.pollingIntervalTime?t.pollingIntervalTime=iu(t.pollingIntervalTime):t.pollingIntervalTime=2e3;let n=new pn;function o(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];setTimeout((()=>{n.emit(t,...r)}),1)}async function a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=[];o("beforeUpdateTableTags",{oldTableTags:Ya(e),newTableTags:Ya(t)});let n=!1;Dr(t,((t,r)=>{e[r]!==t&&(n=!0)})),o("refreshState",{needToRefresh:n,oldTableTags:Ya(e),newTableTags:Ya(t)}),Dr(t,((t,n)=>{if(e[n]!==t){let a=sn(),u={tableName:n,timeTag:t,pm:a};r.push(a),o("refreshTable",u),a.then((r=>{e[n]=t,o("getData",{tableName:n,timeTag:t,data:r})})).catch((t=>{o("error",{msg:"can not get table data: "+n,err:t})}))}})),await Promise.all(r),o("afterUpdateTableTags",{oldTableTags:Ya(e),newTableTags:Ya(t)})}async function u(){if(r)return;r=!0,o("beforePollingTableTags");let e=sn();o("refreshTags",{pm:e});let n=await e.catch((t=>{o("error",{msg:"can not get tags data",err:t})}));n&&await a(n),await function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;uu(t)||(t=10);let e=sn();return setTimeout((function(){e.resolve()}),t),e}(t.pollingIntervalTime),o("afterPollingTableTags"),r=!1}return t.usePollingTableTags&&"undefined"!=typeof window&&window.addEventListener("mouseover",(t=>{u()}),!1),n.setTableTags=function(){e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}},n.updateTableTags=a,n.pollingTableTags=u,n}return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={},r=pn(),n=de(t,"instWConverClient",null);if(null===n)return r.emit("error","invalid opt.instWConverClient"),r;let o=de(t,"cbGetToken",null);hn(o)||(o=()=>"");let a=de(t,"cbGetServerMethods",null);if(!hn(a))return r.emit("error","invalid opt.cbGetServerMethods"),r;let u=de(t,"cbRecvData",null);if(!hn(u))return r.emit("error","invalid opt.cbRecvData"),r;let i=de(t,"cbGetRefreshState",null),c=de(t,"cbGetRefreshTable",null),f=de(t,"cbBeforeUpdateTableTags",null),s=de(t,"cbAfterUpdateTableTags",null),l=de(t,"cbBeforePollingTableTags",null),v=de(t,"cbAfterPollingTableTags",null),p=new Qu;function b(t){return async function(){let e=sn(),r=[...arguments],a=()=>{},u=Lr(r);hn(u)&&(a=u,r=fn(r));let i=o();(function(t){let e,r=Object.prototype.toString.call(t);if(e="[object Promise]"===r,e)return!0;if("[object Function]"!==r)return!1;try{e="function"!=typeof t.subscribe&&"function"==typeof t.then}catch(t){}return e})(i)&&(i=await i),void 0===i&&(i="");let c={__sysInputArgs__:r,__sysToken__:i};return await n.execute(t,c,(function(t,e,r){a({prog:t,p:e,m:r})})).then((t=>{let r=t.msg;"success"===t.state?e.resolve(r):e.reject(r)})).catch((t=>{e.reject(t)})),e}}function h(t){"syncTable"===de(t,"mode")&&p.updateTableTags(de(t,"data"))}return n.on("openOnce",(function(){b("getFuncList")().then((t=>{e={},Dr(t,(t=>{Ee(e,t,b(t))})),a(e)})).catch((t=>{r.emit("error",t)}))})),n.on("broadcast",(function(t){h(t)})),n.on("deliver",(function(t){h(t)})),p.on("refreshState",(t=>{hn(i)&&i(t)})),p.on("refreshTable",(t=>{bn(e[t.tableName])?(hn(c)&&c(t),e[t.tableName].select().then((e=>{t.pm.resolve(e)})).catch((e=>{console.log(`${t.tableName}.select: catch`,e)}))):r.emit("error",`無法存取${t.tableName}資料表`)})),p.on("getData",(t=>{u(t)})),p.on("beforeUpdateTableTags",(t=>{hn(f)&&f(t)})),p.on("afterUpdateTableTags",(t=>{hn(s)&&s(t)})),p.on("beforePollingTableTags",(()=>{hn(l)&&l()})),p.on("afterPollingTableTags",(()=>{hn(v)&&v()})),p.on("error",(t=>{r.emit("error",t)})),r}}));
//# sourceMappingURL=w-serv-webdata-client.umd.js.map
